<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一只特立独行的鸟">
<meta property="og:type" content="website">
<meta property="og:title" content="一只特立独行的鸟">
<meta property="og:url" content="http://kuring.me/page/6/index.html">
<meta property="og:site_name" content="一只特立独行的鸟">
<meta property="og:description" content="一只特立独行的鸟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一只特立独行的鸟">
<meta name="twitter:description" content="一只特立独行的鸟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://kuring.me/page/6/"/>





  <title> 一只特立独行的鸟 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一只特立独行的鸟</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">分享我的学习心得，记录我的学习笔记。趁着年轻多学点东西总是正确的~~~</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_kernel_setup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_kernel_setup/" itemprop="url">
                  Linux下内核编译安装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-04-01T00:00:00+08:00">
                2014-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文仅为了练习Linux内核源码的编译安装，安装环境为VMWare下的CentOS，现有CentOS版本为<code>2.6.32-358.el6.x86_64</code>。<br>/boot/grub/grub.conf文件内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 注释部分去掉</div><div class="line">default=0</div><div class="line">timeout=5</div><div class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</div><div class="line">hiddenmenu</div><div class="line">title CentOS (2.6.32-358.el6.x86_64)</div><div class="line">        root (hd0,0)</div><div class="line">        kernel /vmlinuz-2.6.32-358.el6.x86_64 ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</div><div class="line">        initrd /initramfs-2.6.32-358.el6.x86_64.img</div></pre></td></tr></table></figure>
<h1 id="获取内核源码"><a href="#获取内核源码" class="headerlink" title="获取内核源码"></a>获取内核源码</h1><p>首先从Linux的<a href="www.kernel.org">官方网站</a>下载最新版内核Linux3.13。</p>
<p>执行<code>tar Jxvf linux-3.13.tar.xz -C/usr/src/kernels</code>命令将内核源码解压到内核源代码存放目录/usr/src/kernels/，该源码目录并不固定，但推荐将内核源码存放到该目录下。</p>
<p>为了将上次编译时的目标文件及相关设置文件删除，执行<code>make mrproper</code>。</p>
<h1 id="挑选功能"><a href="#挑选功能" class="headerlink" title="挑选功能"></a>挑选功能</h1><p>可以采用了多种方式，这里采用<code>make menuconfig</code>的方式来挑选内核功能，该方式不需要X Window（<code>make xconfig</code>方式）的支持，而且要比纯命令行方式（<code>make config</code>）要直观。执行<code>make menuconfig</code>遇到如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@localhost linux-3.13]# make menuconfig</div><div class="line">  HOSTCC  scripts/basic/fixdep</div><div class="line">  HOSTCC  scripts/kconfig/conf.o</div><div class="line"> *** Unable to find the ncurses libraries or the</div><div class="line"> *** required header files.</div><div class="line"> *** &apos;make menuconfig&apos; requires the ncurses libraries.</div><div class="line"> ***</div><div class="line"> *** Install ncurses (ncurses-devel) and try again.</div><div class="line"> ***</div><div class="line">make[1]: *** [scripts/kconfig/dochecklxdialog] 错误 1</div><div class="line">make: *** [menuconfig] 错误 2</div></pre></td></tr></table></figure>
<p>这是因为需要ncurses库的支持，下面采用从源码安装的方式安装ncurses。</p>
<p>从ncurses的<a href="https://www.gnu.org/software/ncurses/" target="_blank" rel="external">官方网站</a>下载最新版的ncurses-5.9.tar.gz。然后分别执行<code>./configure</code>、make<code>、</code>make install`命令安装。</p>
<h1 id="更改内核版本号标识"><a href="#更改内核版本号标识" class="headerlink" title="更改内核版本号标识"></a>更改内核版本号标识</h1><p>为了能够在编译完成后的内核版本中通过<code>uname -r</code>看到定义的内核版本号，修改Makefile文件。其中<code>EXTRAVERSION</code>字段值为空，将其赋值为kuring。</p>
<h1 id="编译内核"><a href="#编译内核" class="headerlink" title="编译内核"></a>编译内核</h1><p>执行<code>make</code>命令，该过程需要话费很长时间，我在512MB的VM下跑，花费了大约1个半小时时间。</p>
<h1 id="编译内核模块"><a href="#编译内核模块" class="headerlink" title="编译内核模块"></a>编译内核模块</h1><p>执行<code>make modules</code>命令。</p>
<h1 id="安装内核模块"><a href="#安装内核模块" class="headerlink" title="安装内核模块"></a>安装内核模块</h1><p>执行<code>make modules_install</code>命令，会将内核模块安装到/lib/modules目录下。</p>
<h1 id="安装内核"><a href="#安装内核" class="headerlink" title="安装内核"></a>安装内核</h1><p>执行<code>make install</code>命令，产生如下输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sh /usr/src/kernels/linux-3.13/arch/x86/boot/install.sh 3.13.0kuring arch/x86/boot/bzImage \</div><div class="line">                System.map &quot;/boot&quot;</div><div class="line">ERROR: modinfo: could not find module vmhgfs</div><div class="line">ERROR: modinfo: could not find module vsock</div><div class="line">ERROR: modinfo: could not find module vmware_balloon</div><div class="line">ERROR: modinfo: could not find module vmci</div></pre></td></tr></table></figure>
<p>这个错误跟vmware的vmware tools有关，暂时不去管。</p>
<p>这样再去看/boot/grub/grub.conf文件，会看到文件已经变化，已经将新内核添加到开机启动项中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># 注释部分去掉</div><div class="line">default=1</div><div class="line">timeout=5</div><div class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</div><div class="line">hiddenmenu</div><div class="line">title CentOS (3.13.0kuring)</div><div class="line">        root (hd0,0)</div><div class="line">        kernel /vmlinuz-3.13.0kuring ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</div><div class="line">        initrd /initramfs-3.13.0kuring.img</div><div class="line">title CentOS (2.6.32-358.el6.x86_64)</div><div class="line">        root (hd0,0)</div><div class="line">        kernel /vmlinuz-2.6.32-358.el6.x86_64 ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</div><div class="line">        initrd /initramfs-2.6.32-358.el6.x86_64.img</div></pre></td></tr></table></figure>
<p>同时在/boot目录下已经多出了vmlinuz-3.13.0kuring、System.map-3.13.0kuring、initramfs-3.13.0kuring.img文件。</p>
<p>重启系统后，在启动菜单中多出了新内核选项。进入新内核后，执行<code>uname -r</code>显示<code>3.13.0kuring</code>，说明新内核已经安装完成。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/centos6.5_svn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/centos6.5_svn/" itemprop="url">
                  CentOS6.5下安装svn客户端软件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-22T00:00:00+08:00">
                2014-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在用CentOS默认的svn客户端工具访问Windows下搭建的subversion时会提示如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost 桌面]$ svn checkout https://192.168.100.100/svn/test</div><div class="line">svn: 方法 OPTIONS 失败于 “https://192.168.100.100/svn/test: SSL handshake failed: SSL 错误：Key usage violation in certificate has been detected. (https://192.168.100.100)</div></pre></td></tr></table></figure>
<p>通过执行如下命令可以看到svn是支持https协议的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost ~]$ svn --version</div><div class="line">svn，版本 1.6.11 (r934486)</div><div class="line">   编译于 Apr 11 2013，16:13:51</div><div class="line"></div><div class="line">版权所有 (C) 2000-2009 CollabNet。</div><div class="line">Subversion 是开放源代码软件，请参阅 http://subversion.tigris.org/ 站点。</div><div class="line">此产品包含由 CollabNet(http://www.Collab.Net/) 开发的软件。</div><div class="line"></div><div class="line">可使用以下的版本库访问模块:</div><div class="line"></div><div class="line">* ra_neon : 通过 WebDAV 协议使用 neon 访问版本库的模块。</div><div class="line">  - 处理“http”方案</div><div class="line">  - 处理“https”方案</div><div class="line">* ra_svn : 使用 svn 网络协议访问版本库的模块。  - 使用 Cyrus SASL 认证</div><div class="line">  - 处理“svn”方案</div><div class="line">* ra_local : 访问本地磁盘的版本库模块。</div><div class="line">  - 处理“file”方案</div></pre></td></tr></table></figure>
<p>这是由于svn客户端在https协议中使用了GnuTLS库造成的，将其更改为使用openssl库即可。通过执行如下命令可以查看svn使用的库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost bin]$ ldd svn | grep ssl</div><div class="line">[kuring@localhost bin]$ ldd svn | grep tls</div><div class="line">        libgnutls.so.26 =&gt; /usr/lib64/libgnutls.so.26 (0x00007f33004ad000)</div></pre></td></tr></table></figure>
<hr>
<p>下面选择重新编译的方式来安装svn。</p>
<h1 id="删除subversion"><a href="#删除subversion" class="headerlink" title="删除subversion"></a>删除subversion</h1><p>执行：<code>yum remove subversion</code></p>
<h1 id="检查openssl安装情况"><a href="#检查openssl安装情况" class="headerlink" title="检查openssl安装情况"></a>检查openssl安装情况</h1><p>这里已经安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost tmp]$ rpm -qa | grep openssl</div><div class="line">openssl-1.0.1e-15.el6.x86_64</div><div class="line">openssl-devel-1.0.1e-15.el6.x86_64</div></pre></td></tr></table></figure>
<h1 id="安装neon"><a href="#安装neon" class="headerlink" title="安装neon"></a>安装neon</h1><p>这里选择的安装版本为0.29.6，subversion对neon的版本有要求。如果不是subversion的版本，在执行subversion下的configure文件时并不会报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost software]$ tar zvxf neon-0.29.6.tar.gz</div><div class="line">[kuring@localhost software]$ cd neon-0.29.6</div><div class="line">./configure --with-ssl=openssl</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure></p>
<h1 id="安装apr"><a href="#安装apr" class="headerlink" title="安装apr"></a>安装apr</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zvxf apr-1.5.0.tar.gz</div><div class="line">cd apr-1.5.0</div><div class="line">./configure</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h1 id="安装apr-util"><a href="#安装apr-util" class="headerlink" title="安装apr-util"></a>安装apr-util</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zvxf apr-util-1.5.3.tar.gz </div><div class="line">cd apr-util-1.5.3</div><div class="line">./configure --with-apr=/usr/local/apr</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h1 id="下载sqllite"><a href="#下载sqllite" class="headerlink" title="下载sqllite"></a>下载sqllite</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">unzip sqlite-amalgamation-3080401.zip</div><div class="line">mv sqlite-amalgamation-3080401 sqlite-amalgamation</div><div class="line">mv sqlite-amalgamation subversion-1.8.8/	// 将其复制到subversion源码目录下</div></pre></td></tr></table></figure>
<h1 id="安装subversion"><a href="#安装subversion" class="headerlink" title="安装subversion"></a>安装subversion</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar zvxf subversion-1.7.16.tar.gz</div><div class="line">./configure --with-ssl --with-neon --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<p>然后再执行<code>svn --version</code>命令可以看到已经包含了https协议。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://itekblog.com/key-usage-violation-in-certificate-has-been-detected-centos/" target="_blank" rel="external">SSL handshake failed: SSL error: Key usage violation in certificate has been detected CentOS</a></p>
<h1 id="资料下载"><a href="#资料下载" class="headerlink" title="资料下载"></a>资料下载</h1><p><a href="http://pan.baidu.com/s/1qWNhAqS" target="_blank" rel="external">需要的安装包下载</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/eclipse_viplugin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/eclipse_viplugin/" itemprop="url">
                  在Eclipse中安装viplugin插件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-22T00:00:00+08:00">
                2014-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从官方网站下载最新的viplugin插件：viPlugin_2.12.0。</p>
<p>将viPlugin_2.12.0.zip文件解压到eclipse安装目录下的dropins目录下。</p>
<p>该插件为收费插件，在eclipse安装的根目录下新建viPlugin2.lic文件，文件内容为:_q1MHdGlxh7nCyn<em>FpHaVazxTdn1tajjeIABlcgJBc20
</em>。</p>
<p>重启eclipse后即可生效。</p>
<p>官方参考文档地址：<a href="http://www.viplugin.com/files/User_Manual_viPlugin.pdf" target="_blank" rel="external">http://www.viplugin.com/files/User_Manual_viPlugin.pdf</a></p>
<hr>
<p>相关下载：<a href="http://pan.baidu.com/s/1kT4uStT" target="_blank" rel="external">viPlugin_2.12.0.zip</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_permission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_permission/" itemprop="url">
                  Linux难点之权限类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-08T00:00:00+08:00">
                2014-03-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<p>在Linux操作系统中，每个文件都有一组9个权限位来控制谁能够读写和执行该文件的内容。这组权限对于文件的意义非常容易理解。但是对于目录而言就不是那么容易理解了。要想搞明白权限机制需要了解文件系统中的inode节点和block等概念，并大致了解文件系统的内部实现原理。</p>
<h1 id="文件的权限"><a href="#文件的权限" class="headerlink" title="文件的权限"></a>文件的权限</h1><p>这部分比较容易理解。比较容易搞错的为：</p>
<p>w位：包含对文件的添加、修改该文件内容的权限，但不包含删除文件或移动该文件的权限，因为文件的文件名信息存储在父目录的block中，而不是在该文件的inode节点中。父目录的block中包含该文件的inode节点和文件名信息，通过父目录中的inode节点找到该文件。</p>
<h1 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h1><p>r位：表示具有读取该目录列表的权限。</p>
<p>w位：对该文件夹下创建新的文件或目录进行增加、删除、修改操作。</p>
<p>x位：这个稍微难以理解。表示用户能否进入该目录成为工作目录，即是否可以cd到该目录。通常和r位组合一块使用。</p>
<h2 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h2><p>假设root用户对testing目录和testing目录下的testing文件拥有的如下权限：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# ls -ald testing/ testing/testing</div><div class="line">drwxr--r--. 2 root root 4096 3月   1 11:44 testing/</div><div class="line">-rw-------. 1 root root    0 3月   1 11:44 testing/testing</div></pre></td></tr></table></figure>
<p>kuring用户拥有对该文件夹的读权限，但是没有x权限。当kuring用户访问时会提示如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// 拥有r的权限可以查询文件名，但是没有x权限，不能读取除文件名外的其他信息，产生了问号。</div><div class="line">[kuring@localhost tmp]$ ll testing/</div><div class="line">ls: 无法访问testing/testing: 权限不够</div><div class="line">总用量 0</div><div class="line">-????????? ? ? ? ?            ? testing    </div><div class="line"></div><div class="line">// 没有x权限，不能进入该目录</div><div class="line">[kuring@localhost tmp]$ cd testing/</div><div class="line">bash: cd: testing/: 权限不够</div></pre></td></tr></table></figure>
<h2 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h2><p>在上述例子中，给kuring用户增加对目录testing的rwx权限，却只拥有testing目录下的testing文件的r权限。权限情况如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost tmp]$ ls -ald testing testing/testing</div><div class="line">drwxr--rwx. 2 root root 4096 3月   1 13:29 testing</div><div class="line">-rw-r--r--. 1 root root    0 3月   1 13:29 testing/testing</div></pre></td></tr></table></figure>
<p>kuring用户执行如下操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 当对文件进行更改时由于没有对文件的w权限，操作失败</div><div class="line">[kuring@localhost tmp]$ echo &quot;world&quot; &gt;&gt; testing/testing</div><div class="line">bash: testing/testing: 权限不够</div><div class="line"></div><div class="line">// 当对文件进行删除操作时却可以删除该文件，这是因为文件删除操作的权限是由该文件所在目录的w位决定的</div><div class="line">// 文件删除操作会修改父目录中block节点中的文件名内容，而父目录的权限为rx，不可写。</div><div class="line">[kuring@localhost tmp]$ rm testing/testing</div><div class="line">rm：是否删除有写保护的普通文件 &quot;testing/testing&quot;？y</div><div class="line">[kuring@localhost tmp]$ ls testing/</div><div class="line">[kuring@localhost tmp]$</div></pre></td></tr></table></figure>
<p>只有了解了原理，就可以理解在多级目录并且目录的权限不一致的情况下相应的权限问题了。</p>
<hr>
<h1 id="进程用户ID"><a href="#进程用户ID" class="headerlink" title="进程用户ID"></a>进程用户ID</h1><p>要讲解set uid和set gid，就涉及到进程的用户ID概念。用户ID又可以分为两部分：</p>
<ul>
<li><p>实际用户ID和实际组ID：标识了究竟是哪个用户执行了该程序，跟命令行中的登录用户一致，可以通过id命令查看。</p>
</li>
<li><p>有效用户ID和有效组ID：系统通过有效用户ID、有效组ID和附加组ID来决定进行对系统资源的访问权限。在Linux系统中一个用户可以属于多个组，在/etc/passwd文件中一个用户仅能标识出隶属于一个组ID，该组ID叫做默认的组ID。在/etc/group为文件中可以标识出一个用户隶属于多个组，这多个组中除去默认的组ID叫做附加组ID。</p>
</li>
</ul>
<h1 id="set-uid"><a href="#set-uid" class="headerlink" title="set uid"></a>set uid</h1><ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>该权限仅在执行该程序过程中有效</li>
<li>执行者将具有该程序拥有者的权限</li>
</ul>
<p>以/usr/bin/passwd命令为例，该程序的权限为：rwsr-xr-x。普通用户可以调用该程序修改自己的密码，而密码文件/etc/shadow未设置任何权限，即只有root用户可以操作该文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost tmp]# ll /usr/bin/passwd</div><div class="line">-rwsr-xr-x. 1 root root 30768 2月  22 2012 /usr/bin/passwd</div><div class="line">[root@localhost tmp]# ll /etc/shadow</div><div class="line">----------. 1 root root 1248 11月 30 10:50 /etc/shadow</div></pre></td></tr></table></figure>
<p>passwd文件的s标志表明setuid位被设置。</p>
<p>passwd的拥有者为root；当普通用户执行passwd命令时，普通用户具有该命令的执行权限；passwd执行该命令时会暂时获得root用户权限；/etc/shadow就可以被修改。</p>
<p>也许看到这里就会有疑问：那岂不是普通用户可以通过/etc/passwd命令修改其他用户的密码了。之所以不可以这么操作是因为passwd命令内部通过逻辑实现。</p>
<h1 id="set-gid"><a href="#set-gid" class="headerlink" title="set gid"></a>set gid</h1><p>设置在文件上的情况：</p>
<ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>执行者在运行程序的过程中将会获得该执行群组的权限</li>
</ul>
<p>设置在目录上的情况：</p>
<ul>
<li>用户对目录具有r和x的权限</li>
<li>用户在目录下的有效群组将会变成该目录的群组</li>
<li>若用户在此目录下具有w的权限，使用者建立的群组与该目录的群组相同</li>
</ul>
<h1 id="粘附位（sticky-bit）"><a href="#粘附位（sticky-bit）" class="headerlink" title="粘附位（sticky bit）"></a>粘附位（sticky bit）</h1><p>该权限位仅对目录有效，如果在目录上设置了粘附位，只有该目录的属主、该文件的属主或root用户可以删除或重命名该目录文件。</p>
<p>/tmp文件夹的权限如下，其中的t位表示粘附位：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost /]$ ll -ad tmp/</div><div class="line">drwxrwxrwt. 25 root root 4096 3月   1 14:51 tmp/</div></pre></td></tr></table></figure>
<p>如果在/tmp下kuring用户创建了自己的文件kuring_file，并设置权限为777，test用户并不能删除该文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost tmp]$ touch kuring_file</div><div class="line">[kuring@localhost tmp]$ ll kuring_file</div><div class="line">-rw-rw-r--. 1 kuring kuring 0 3月   1 15:05 kuring_file</div><div class="line">[kuring@localhost tmp]$ chmod 777 kuring_file</div><div class="line">[kuring@localhost tmp]$ ll kuring_file</div><div class="line">-rwxrwxrwx. 1 kuring kuring 0 3月   1 15:05 kuring_file</div><div class="line"></div><div class="line">[kuring@localhost tmp]$ su - test</div><div class="line">密码：</div><div class="line">[test@localhost ~]$ cd /tmp/</div><div class="line">[test@localhost tmp]$ rm kuring_file</div><div class="line">rm: 无法删除&quot;kuring_file&quot;: 不允许的操作</div></pre></td></tr></table></figure>
<h1 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h1><p>如果设置了setuid位，属主的执行权限中的x用s来代替；<br>如果设置了setgid位，组执行权限中的x用s来代替；<br>如果设置了sticky位，权限最后的那个字符被设置为t；<br>如果设置了setuid、setgid或sticky位中一个，又没有设置相应的执行位，这些位显示为S或T。</p>
<h1 id="权限设定方式"><a href="#权限设定方式" class="headerlink" title="权限设定方式"></a>权限设定方式</h1><p>4为setuid位，2为setgid位，1为sticky位。具体参考《鸟哥的Linux私房菜》。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>《鸟哥的Linux私房菜》<br>《UNIX/Linux系统管理技术手册》</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_screen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_screen/" itemprop="url">
                  Linux下的screen命令
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-18T20:51:12+08:00">
                2014-02-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在使用SSH或者telent远程登录到Linux 服务器，经常运行一些需要很长时间才能完成的任务，比如系统备份、ftp 传输等等。通常情况下我们都是为每一个这样的任务开一个远程终端窗口，因为它们执行的时间太长了。必须等待它们执行完毕，在此期间不能关掉窗口或者断开连接，否则这个任务就会被杀掉，一切半途而废了。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>CentOS下默认没有安装该命令，从screen的官方网站下载，下载地址：<a href="http://ftp.gnu.org/gnu/screen/。" target="_blank" rel="external">http://ftp.gnu.org/gnu/screen/。</a></p>
<ol>
<li>解压后执行<code>./configure</code>。</li>
<li>执行<code>make</code>命令。在执行make命令时会遇到错误<code>pty.c:38:26: 错误：sys/stropts.h：没有那个文件或目录</code>，在/usr/install/sys/目录下创建一个stropts.h的空文件即可。</li>
<li>执行<code>make install</code>，该命令并不会将screen命令复制到系统的PATH变量包含的路径下，即不能执行screen命令。</li>
<li>执行<code>install -m 644 etc/etcscreenrc /etc/screenrc</code>。</li>
<li>执行<code>cp screen /bin/</code>。</li>
<li>执行<code>cp doc/man/man1/screen.1 /usr/share/man/man1/</code>，即可以可使用<code>man screen</code>查看帮助。</li>
</ol>
<h1 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h1><p>当关闭窗口或断开连接时，内核会将SIGHUP信号发送到会话期首进程，进程对SIGHUP的处理动作为终止。如果会话期首进程终止，则该信号发送到该会话期前台进程组。一个进程退出导致一个孤儿进程组中产生时，如果任意一个孤儿进程组进程处于STOP状态，发送SIGHUP和SIGCONT信号到该进程组中所有进程。因此当网络断开或终端窗口关闭后，控制进程收到SIGHUP信号退出，会导致该会话期内其他进程退出。</p>
<p>为解决上述问题，Linux程序在设计时可设计成守护进程的方式启动。</p>
<p>另外也可以通过<code>nohup 命令 &amp;</code>的方式启动来解决问题。</p>
<h1 id="新建screen"><a href="#新建screen" class="headerlink" title="新建screen"></a>新建screen</h1><ul>
<li>直接输入<code>screen</code>命令即可使用。</li>
<li>输入<code>screen -S kuring</code>，这里给screen取了一个名字，方便辨认。</li>
<li><code>screen 命令</code>直接在screen中执行命令，命令结束后screen退出。</li>
</ul>
<h1 id="分离与恢复"><a href="#分离与恢复" class="headerlink" title="分离与恢复"></a>分离与恢复</h1><p>在screen窗口中执行<code>ctrl + a d</code>命令，screen会给出<em>[detached]</em>提示，并恢复到执行screen之前的bash。<br>查找之前的screen执行<code>screen -ls</code>，会列出当前打开的screen。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">There are screens on:</div><div class="line">        8576.pts-3.localhost    (Attached)</div><div class="line">        8449.kuring     (Detached)</div><div class="line">2 Sockets in /tmp/uscreens/S-kuring.</div></pre></td></tr></table></figure></p>
<p>这里系统中打开了两个screen，一个为Attached，另一个为Detached。</p>
<p>重新连接执行<code>screen -r kuring</code>或<code>screen -r 8449</code>或<code>screen -r</code>，当系统中仅有一个处于Detached状态的screen时就可以直接执行<code>screen -r</code>命令。</p>
<h1 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h1><p>在screen的shell中执行<code>exit</code>命令即可关闭screen。</p>
<p>也可以执行<code>ctrl + a k</code>，会杀死当前screen中的所有运行进程。</p>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p>在screen中执行vi命令时会提示<em>E437: terminal capability “cm” required</em>错误，执行<code>echo $TERM</code>查看发现打印值为<em>screen</em>，而未执行screen时的bash打印值为<em>xterm</em>，在screen中执行<code>export TERM=xterm</code>即可解决该问题。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>更多高级使用方法请参考以下文档：</p>
<p><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-screen/" target="_blank" rel="external">linux 技巧：使用 screen 管理你的远程会话</a><br><a href="http://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html" target="_blank" rel="external">linux screen 命令详解</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/c_trim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/c_trim/" itemprop="url">
                  用C语言实现的trim函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-18T00:00:00+08:00">
                2014-02-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>trim函数在其他语言中比较常见，这里用C语言实现一个，不使用C语言的库函数。该例子中不需要额外的申请空间，算法的时间复杂度为O(1)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">char *trim(char * str)</div><div class="line">&#123;</div><div class="line">	char *buf1, *buf2;</div><div class="line">	int i;</div><div class="line">	if (str == NULL)</div><div class="line">	&#123;</div><div class="line">		return NULL;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	// 处理字符串前面的空格	</div><div class="line">	for (buf1=str; *buf1 &amp;&amp; *buf1==&apos; &apos;; buf1++);</div><div class="line"></div><div class="line">	// 将去掉前面空格的字符串向前复制</div><div class="line">	for (buf2=str, i=0; *buf1;)</div><div class="line">	&#123;</div><div class="line">		*buf2++ = *buf1++;</div><div class="line">		i++;</div><div class="line">	&#125;</div><div class="line">	*buf2 = &apos;\0&apos;;</div><div class="line"></div><div class="line">	// 处理字符串后面的空格</div><div class="line">	while (*--buf2 == &apos; &apos;)</div><div class="line">	&#123;</div><div class="line">		*buf2 = &apos;\0&apos;;</div><div class="line">	&#125;</div><div class="line">	return str;	</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(int argc, char *argv[])</div><div class="line">&#123;</div><div class="line">      printf(&quot;trim(\&quot;%s\&quot;) &quot;, argv[1]);</div><div class="line">      printf(&quot;returned \&quot;%s\&quot;\n&quot;, trim(argv[1]));</div><div class="line">      return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/centos_yum_iso/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/centos_yum_iso/" itemprop="url">
                  CentOS中将光盘作为安装源
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-18T00:00:00+08:00">
                2014-02-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文是VMWare下的CentOS操作系统将yum源更改为光盘的实例，光盘的iso文件存放在宿主机器上，通过VMWare的共享文件夹功能与CentOS系统共享文件。CentOS中共享文件夹的存放路径为/mnt/hgfs中。CentOS的光盘为两张，分别为CentOS-6.5-x86_64-bin-DVD1.iso、CentOS-6.5-x86_64-bin-DVD2.iso。注意LiveCD版的CentOS系统盘是不可以作为yum源的。</p>
<h1 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h1><ol>
<li><code>mkdir -p /media/cdrom;mkdir -p /media/CentOS</code>，创建挂载两个挂载目录，分别挂载DVD1和DVD2。</li>
<li>执行<code>mount /mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso /media/cdrom/ -o loop;mount /mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso /media/CentOS/ -o loop;</code>，将iso挂载到创建的目录下。</li>
<li>执行<code>df -h</code>命令即可看到挂载的文件系统，输出如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso  4.2G  4.2G     0 100% /media/cdrom</div><div class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso  1.2G  1.2G     0 100% /media/CentOS</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="设置本地yum源"><a href="#设置本地yum源" class="headerlink" title="设置本地yum源"></a>设置本地yum源</h1><p>在/etc/yum.repos.d目录下CentOS-Base.repo记录着yum通过网络更新的源，CentOS-Media.repo记录着通过本地文件更新的源。其中CentOS-Media.repo文件的内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"># CentOS-Media.repo</div><div class="line">#</div><div class="line">#  This repo can be used with mounted DVD media, verify the mount point for</div><div class="line">#  CentOS-6.  You can use this repo and yum to install items directly off the</div><div class="line">#  DVD ISO that we release.</div><div class="line">#</div><div class="line"># To use this repo, put in your DVD and use it with the other repos too:</div><div class="line">#  yum --enablerepo=c6-media [command]</div><div class="line">#</div><div class="line"># or for ONLY the media repo, do this:</div><div class="line">#</div><div class="line">#  yum --disablerepo=\* --enablerepo=c6-media [command]</div><div class="line"></div><div class="line">[c6-media]</div><div class="line">name=CentOS-$releasever - Media</div><div class="line">baseurl=file:///media/CentOS/</div><div class="line">        file:///media/cdrom/</div><div class="line">        file:///media/cdrecorder/</div><div class="line">gpgcheck=1</div><div class="line">enabled=0</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</div></pre></td></tr></table></figure></p>
<p>其中已经包含了/media/cdrom路径和/media/CentOS路径，至此配置已经完毕。</p>
<p>安装软件需要通过命令<code>yum --disablerepo=\* --enablerepo=c6-media [command]</code>，执行<code>yum [command]</code>命令时还是联网执行。</p>
<h1 id="设置开启启动自动挂载iso文件"><a href="#设置开启启动自动挂载iso文件" class="headerlink" title="设置开启启动自动挂载iso文件"></a>设置开启启动自动挂载iso文件</h1><p>在/etc/fstab文件中的末尾增加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso /media/cdrom/ iso9660 loop 0 0</div><div class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso /media/CentOS/ iso9660 loop 0 0</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/x_window/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/x_window/" itemprop="url">
                  X Window学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-17T00:00:00+08:00">
                2014-02-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>X Window的实现机制还是比较难以理解的，尤其是跟软件开发中的客户端-服务器模式不太一样。涉及到概念也比较多，甚至很对教程对概念的理解不一。最近深入学习了下X Window的原理，在此做一下整理。先上一个摘自维基百科的图：<br><img src="/ref/x_window/X_client_server_example.svg.png" alt="X Window架构"></p>
<p>常用快捷键<br>ctrl+alt+fn：切换到相应的虚拟控制台，n为1-12。默认情况下，linux操作系统会在1-6上运行6个虚拟控制台。<br>ctrl+alt+退格键：关闭X window系统。<br>在vmware环境下，ctrl+alt快捷键跟vmware冲突，需要先按住ctrl+alt，然后按一下空格键并松开，再按下相应的fn键才能使用。</p>
<p>X Server<br>负责硬件管理、屏幕绘制、字体，并接收输入设备（如键盘、鼠标等）的动作，并且告知X Client。<br>Linux下的X Server软件为Xorg，通过X（Xorg的链接文件）命令即可执行。<br>输入X命令后，会在第7个控制台启动X Server，将会出现一个什么都没有的漆黑界面，这是由于没有任何X client程序输入的原因。<br>可以在Linux下启动多个X Server软件，从0开始编号。如果再执行<code>X:2</code>命令会启动第二个X Server，此时X Server会在第8个控制台运行。如果第一次执行的是<code>X:2</code>命令则X Server会在第7个控制台运行。<br>在Windows操作系统下的Xming、Xmanager等可以远程连接Linux界面的软件其实就是X Server。</p>
<p>X Client<br>即X应用程序，运行在X Window下的窗口程序都属于X client。比如firefox就是一个X Client。接收来自X Server的处理动作，将动作处理成为绘图数据，并将绘图数据传回给X Server。X Client与X Server之间通过X Window System Core Protocol协议进行通讯。<br>xclock是一个简易的X Client的时钟程序，在:1上启动X Server后，执行<code>xclock –display :1&amp;</code>命令将xclock输出到X Server后的画面如下：<br><img src="/ref/x_window/xclock_no_wm.png" alt="xclock"><br>该程序可以在X Server上执行，但是画面非常简陋，甚至没有窗口的菜单栏和最大化等按钮。</p>
<p>Window Manager<br>一种特殊的X Client，提供了窗口的样式。常用的Window Manager包括GNOME默认的metacity、twm等。<br>将metacity输出到:1上的X Server的命令为<code>metacity –display=:1 &amp;</code>，效果如下：<br><img src="/ref/x_window/xclock_wm.png" alt="Image Title"><br>可以看到窗口多出了最小化、最大化、关闭按钮，并且窗口可以移动和缩放等操作。</p>
<p>Display Manager<br>提供用户登录画面、帮助X Server建立Session。<br>gnome采用的Display Manager为gdm，KDE采用kdm，还有tdm、xdm等。</p>
<p>Desktop Manager<br>X Server、X Client、Window Manager的一个集合。常用的Desktop Manager包括：KDE、GNOME等。</p>
<p>startx启动流程<br>在命令行下执行startx命令后，系统直接进入了桌面环境，并未出现登录界面。进程树如下：<br><img src="/ref/x_window/startx_pstree.png" alt="Image Title"></p>
<ol>
<li>startx会调用xinit命令，xinit命令的主要是启动一个X Server软件。</li>
<li>接着xinit命令会调用gnome-session启动gnome的环境所需要的软件。</li>
</ol>
<p>init 5启动流程<br>在命令行下执行init 5，首先出现的画面为登录信息。进程树如下：<br><img src="/ref/x_window/init5_pstree.png" alt="Image Title"></p>
<ol>
<li>执行/etc/rc.d/rc5.d中的daemon。</li>
<li>执行/etc/X11/prefdm文件，会选择启动gdm、kdm、xdm、tdm。</li>
<li>这里以gdm为例，gdm是一个shell脚本，会启动gdm-binary命令。</li>
</ol>
<p>实战<br>Windows主机连接Linux的教程参见我的另外一篇文章《Redhat安装完成之后的设置》中的相关部分。<br>两台Linux机器之间通过XWindow实现连接的用法比较少见，通常情况下可以通过vnc代替。<br>Linux主机连接Windows的工具为rdesktop。</p>
<p>参考文章<br>《鸟哥的Linux私房菜》<br>《Linux操作系统之奥秘》<br>视频：<a href="http://edu.51cto.com/lesson/id-12709.html" target="_blank" rel="external">RH033-ULE112-16-linux下X图形显示体系</a><br>视频：<a href="http://www.rhce.cc/?p=1117" target="_blank" rel="external">Xwindow详解</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_net_tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_net_tools/" itemprop="url">
                  Linux常用网络诊断工具整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-08T00:00:00+08:00">
                2014-02-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文对Linux常用的网络命令进行整理和总结。</p>
<h1 id="连通性测试"><a href="#连通性测试" class="headerlink" title="连通性测试"></a>连通性测试</h1><h2 id="ping命令"><a href="#ping命令" class="headerlink" title="ping命令"></a>ping命令</h2><p>最常用的网络诊断命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[kuring@localhost ~]$ ping www.baidu.com</div><div class="line">PING www.a.shifen.com (61.135.169.125) 56(84) bytes of data.</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=1 ttl=128 time=25.5 ms</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=2 ttl=128 time=20.3 ms</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=3 ttl=128 time=25.0 ms</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=4 ttl=128 time=21.7 ms</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=5 ttl=128 time=23.4 ms</div><div class="line">64 bytes from 61.135.169.125: icmp_seq=6 ttl=128 time=21.9 ms</div></pre></td></tr></table></figure></p>
<p>通过上述输出可以看出，ping命令可得到DNS对应的IP信息、ping的数据包大小、网络延迟信息。</p>
<p>另外，可以通过-s参数指定ping的数据包大小。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">kuring@ubuntu:~$ ping www.baidu.com -s 1024</div><div class="line">PING www.a.shifen.com (61.135.169.125) 1024(1052) bytes of data.</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=1 ttl=55 time=22.6 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=2 ttl=55 time=22.9 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=3 ttl=55 time=53.0 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=4 ttl=55 time=28.0 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=5 ttl=55 time=54.7 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=6 ttl=55 time=93.1 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=7 ttl=55 time=26.9 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=8 ttl=55 time=25.2 ms</div><div class="line">1032 bytes from 61.135.169.125: icmp_req=9 ttl=55 time=25.4 ms</div><div class="line">^C1032 bytes from 61.135.169.125: icmp_req=10 ttl=55 time=21.2 ms</div><div class="line"></div><div class="line">--- www.a.shifen.com ping statistics ---</div><div class="line">10 packets transmitted, 10 received, 0% packet loss, time 45436ms</div><div class="line">rtt min/avg/max/mdev = 21.225/37.350/93.149/21.966 ms</div></pre></td></tr></table></figure></p>
<p>会发现ping命令的响应时间变长了，这正是由于ping发送数据包变大了。</p>
<h2 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h2><p>可以显示路由信息。</p>
<h2 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h2><p>traceroute命令的升级版，可以动态刷新路由信息，可以显示路由上每个节点的丢包率和时间等信息，信息比较全面和直观。</p>
<h1 id="arp相关"><a href="#arp相关" class="headerlink" title="arp相关"></a>arp相关</h1><h2 id="arping"><a href="#arping" class="headerlink" title="arping"></a>arping</h2><p>可以通过该命令查看IP地址对应的mac地址。<code>arping IP地址</code>会立即发送一个arp广播，可以根据收到的arp回应的多少看局域网内是否中arp病毒、IP地址冲突等情况。</p>
<h2 id="arp"><a href="#arp" class="headerlink" title="arp"></a>arp</h2><p>跟arp协议相关，可以设置arp表、读取arp表等。</p>
<h1 id="端口相关"><a href="#端口相关" class="headerlink" title="端口相关"></a>端口相关</h1><h2 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h2><p>可以利用该命令来测试某个端口是否打开。例如执行<code>telnet localhost 881</code>其中881为本机的未打开端口，会产生如下输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Trying 127.0.0.1...</div><div class="line">telnet: connect to address 127.0.0.1: Connection refused</div></pre></td></tr></table></figure>
<p>执行<code>telnet localhost 22</code>，其中22端口为本机的ssh服务端口且已经打开，会产生如下输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Trying 127.0.0.1...</div><div class="line">Connected to localhost.</div><div class="line">Escape character is &apos;^]&apos;.</div><div class="line">SSH-2.0-OpenSSH_5.3</div></pre></td></tr></table></figure>
<p>则表示本机的22端口已经打开。</p>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p>查看本机网络端口命令，常用<code>netstat -aunp</code>。</p>
<p>#DNS相关</p>
<h2 id="host"><a href="#host" class="headerlink" title="host"></a>host</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">kuring@ubuntu:~$ host www.google.com.hk</div><div class="line">www.google.com.hk is an alias for www-wide.l.google.com.</div><div class="line">www-wide.l.google.com has address 74.125.128.199</div><div class="line">www-wide.l.google.com has IPv6 address 2404:6800:4005:c00::c7</div></pre></td></tr></table></figure>
<h2 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">kuring@ubuntu:~$ nslookup www.google.com.hk</div><div class="line">Server:		127.0.0.1</div><div class="line">Address:	127.0.0.1#53</div><div class="line"></div><div class="line">Non-authoritative answer:</div><div class="line">www.google.com.hk	canonical name = www-wide.l.google.com.</div><div class="line">Name:	www-wide.l.google.com</div><div class="line">Address: 74.125.128.199</div></pre></td></tr></table></figure>
<h2 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h2><p>可以代替nslookup的命令，显示的域名信息更为详细。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h1 id="ab"><a href="#ab" class="headerlink" title="ab"></a>ab</h1><p>Linux下的压力测试工具，可以模拟多个客户端发送多个请求。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">kuring@ubuntu:~$ ab -c 100 -n 100 http://kuring.me/</div><div class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;</div><div class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</div><div class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</div><div class="line"></div><div class="line">Benchmarking kuring.me (be patient).....done</div><div class="line"></div><div class="line"></div><div class="line">Server Software:        Tengine/2.0.0</div><div class="line">Server Hostname:        kuring.me</div><div class="line">Server Port:            80</div><div class="line"></div><div class="line">Document Path:          /</div><div class="line">Document Length:        707 bytes</div><div class="line"></div><div class="line">Concurrency Level:      100</div><div class="line">Time taken for tests:   1.547 seconds</div><div class="line">Complete requests:      100</div><div class="line">Failed requests:        10</div><div class="line">   (Connect: 0, Receive: 0, Length: 10, Exceptions: 0)</div><div class="line">Write errors:           0</div><div class="line">Non-2xx responses:      90</div><div class="line">Total transferred:      145330 bytes</div><div class="line">HTML transferred:       126570 bytes</div><div class="line">Requests per second:    64.64 [#/sec] (mean)</div><div class="line">Time per request:       1546.990 [ms] (mean)</div><div class="line">Time per request:       15.470 [ms] (mean, across all concurrent requests)</div><div class="line">Transfer rate:          91.74 [Kbytes/sec] received</div><div class="line"></div><div class="line">Connection Times (ms)</div><div class="line">              min  mean[+/-sd] median   max</div><div class="line">Connect:      173  223  43.8    200     289</div><div class="line">Processing:   167  340 301.5    236    1368</div><div class="line">Waiting:      166  339 300.5    235    1364</div><div class="line">Total:        345  563 295.4    438    1546</div><div class="line"></div><div class="line">Percentage of the requests served within a certain time (ms)</div><div class="line">  50%    438</div><div class="line">  66%    555</div><div class="line">  75%    562</div><div class="line">  80%    597</div><div class="line">  90%   1108</div><div class="line">  95%   1474</div><div class="line">  98%   1484</div><div class="line">  99%   1546</div><div class="line"> 100%   1546 (longest request)</div></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="http://edu.51cto.com/lesson/id-12697.html" target="_blank" rel="external">解决Linux服务器访问比较慢的问题-网络测试命令讲解</a></li>
<li>《鸟哥的Linux私房菜-服务器架设篇》</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/cgdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/cgdb/" itemprop="url">
                  cgdb的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-02T00:00:00+08:00">
                2014-02-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>长期以来在使用gdb调试代码的时候都会因为调试代码的时候查看代码不方便而烦恼，gdb的list命令不够好用。而且网上的教程中也确实不容易发现可以替代gdb的好的终端下的调试工具，对于图形界面的集成开发环境（比如Eclipse CDT）和图形界面的调试工具（比如DDD）不在本文讨论的范围内，毕竟很多时候连接linux的时候还是终端方式的居多。</p>
<h1 id="tui模式"><a href="#tui模式" class="headerlink" title="tui模式"></a>tui模式</h1><p>直到后来偶然间发现了gdb的<code>-tui</code>参数，该参数通过文本用户界面模式进行调试代码，使用起来确实方便了许多，再也不用边调试边list代码了，该模式已经满足了我的边调试边查看代码的需求。另外，gdbtui命令也可完成相同的功能。一个tui调试模式的界面如下：</p>
<p><img src="http://beej.us/guide/bggdb/gdbwinss.png" alt="gdb -tui"></p>
<p>虽然，tui模式大大的提供了调试的友好性，但是仍然有一些缺点。比如显示的代码无法语法高亮，虽然会很影响用户体验，但是我毕竟是一名后台开发的程序员，这点可以忽略不计。源码布局和gdb命令布局之间切换不够方便，这点也不要紧，毕竟可以切换，只是需要输入两个单词就可以切换了。最最有问题的就是，该命令使用的时curses库，当用ssh通过windows下的SecureCRT或者putty连接进行调试时，源码布局部分往往不能够自动刷新，需要手工输入<code>CTRL+L</code>来刷新，具体的原理我没有去深究。</p>
<h1 id="cgdb"><a href="#cgdb" class="headerlink" title="cgdb"></a>cgdb</h1><p>主要是本着解决gdb tui中的源码布局不能自动刷新的问题，本文的重点<code>cgdb</code>命令终于闪亮登场了。该命令不仅解决了源码布局自动刷新问题，同时也支持了语法高亮，同时源码查看支持vi的部分命令。功能基本跟vimgdb相近，但是安装更容易，在ubuntu下只需执行<code>sudo apt-get install cgdb</code>即可。</p>
<p><img src="https://cgdb.github.io/images/screenshot_debugging.png" alt="cgdb"></p>
<p>下面是一些常用命令：</p>
<p>ESC：切换焦点到源码模式，在该界面中可以使用vi的常用命令</p>
<p>i：切换焦点到gdb模式</p>
<p>o：打开文件对话框，选择要显示的代码文件，按ESC取消</p>
<p>空格：在当前行设置一个断点</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="http://beej.us/guide/bggdb/" target="_blank" rel="external">Beej’s Quick Guide to GDB</a><br><a href="https://cgdb.github.io/" target="_blank" rel="external">cgdb</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Kuring Lyu" />
          <p class="site-author-name" itemprop="name">Kuring Lyu</p>
           
              <p class="site-description motion-element" itemprop="description">一只特立独行的鸟</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">106</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kuring" title="Github地址" target="_blank">Github地址</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://weibo.com/ilvkai" title="新浪微博" target="_blank">新浪微博</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kuring Lyu</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>

<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一只特立独行的鸟">
<meta property="og:type" content="website">
<meta property="og:title" content="一只特立独行的鸟">
<meta property="og:url" content="http://kuring.me/page/4/index.html">
<meta property="og:site_name" content="一只特立独行的鸟">
<meta property="og:description" content="一只特立独行的鸟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一只特立独行的鸟">
<meta name="twitter:description" content="一只特立独行的鸟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://kuring.me/page/4/"/>





  <title> 一只特立独行的鸟 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一只特立独行的鸟</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">分享我的学习心得，记录我的学习笔记。趁着年轻多学点东西总是正确的~~~</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_listen_shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_listen_shell/" itemprop="url">
                  一个Linux下的监听脚本程序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-06T00:00:00+08:00">
                2014-11-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>为了避免linux下的控制台程序A死掉，可以通过一个另外一个程序B来监听A程序，当A程序异常退出时将B程序带起来。当然程序设计的最好方式为程序不崩溃，但是程序中存在bug很难避免，该方法还是有一定的实践意义。对于B程序可以通过shell脚本或者单独一个应用程序来解决。本文将通过shell脚本来解决此问题。</p>
<h1 id="shell脚本的内容"><a href="#shell脚本的内容" class="headerlink" title="shell脚本的内容"></a>shell脚本的内容</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">check_process()</div><div class="line">&#123;</div><div class="line">	# check parameter</div><div class="line">	if [ $1 = &quot;&quot; ];</div><div class="line">	then</div><div class="line">		return -1</div><div class="line">	fi</div><div class="line"></div><div class="line">	# get the running process</div><div class="line">	process_names=$(ps -ef | grep $1 | grep -v grep | awk &apos;&#123;print $8&#125;&apos;)</div><div class="line">	for process_name in $process_names</div><div class="line">	do</div><div class="line">		if [ $process_name = $1 ] ;</div><div class="line">		then</div><div class="line">			return 1</div><div class="line">		fi</div><div class="line">	done</div><div class="line"></div><div class="line">	# not run and run the process</div><div class="line">	echo &quot;$(date) : process $1 not run, just run it&quot;</div><div class="line">	$1</div><div class="line">	return 0</div><div class="line">&#125;</div><div class="line"></div><div class="line">while [ 1 ];do</div><div class="line">	check_process &quot;/usr/bin/app/process&quot;	# programe path</div><div class="line">	sleep 5</div><div class="line">done</div></pre></td></tr></table></figure>
<h1 id="将shell脚本在脱离控制台下可以运行"><a href="#将shell脚本在脱离控制台下可以运行" class="headerlink" title="将shell脚本在脱离控制台下可以运行"></a>将shell脚本在脱离控制台下可以运行</h1><p>一旦断开了控制台，shell脚本就会由于接收到SIGHUP信号而退出。这里有两种思路来解决该问题，一种是通过系统的crontab来定期调用脚本程序，另外一种是通过神奇的screen程序来解决该问题，我这里通过screen程序来解决该问题，具体screen程序的应用见我的另外一篇文章《》。</p>
<h1 id="应用程序为daemon方式运行"><a href="#应用程序为daemon方式运行" class="headerlink" title="应用程序为daemon方式运行"></a>应用程序为daemon方式运行</h1><p>为了能够保证该脚本监控多个应用程序，需要将应用程序设置为daemon方式运行，可以调用函数daemon实现。也可以调用单独实现的daemon函数，具体代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">void init_daemon(void) </div><div class="line">&#123; </div><div class="line">    int pid; </div><div class="line">    int i;  </div><div class="line"></div><div class="line">    if(pid=fork()) </div><div class="line">        exit(0);//是父进程，结束父进程 </div><div class="line">    else if(pid&lt; 0)  </div><div class="line">        exit(1);//fork失败，退出 </div><div class="line">    //是第一子进程，后台继续执行 </div><div class="line"></div><div class="line">    setsid();//第一子进程成为新的会话组长和进程组长 </div><div class="line">    //并与控制终端分离 </div><div class="line">    if(pid=fork()) </div><div class="line">        exit(0);//是第一子进程，结束第一子进程 </div><div class="line">    else if(pid&lt; 0)  </div><div class="line">        exit(1);//fork失败，退出 </div><div class="line">    //是第二子进程，继续 </div><div class="line">    //第二子进程不再是会话组长 </div><div class="line"></div><div class="line">    for(i=0;i&lt; NOFILE;++i)//关闭打开的文件描述符 </div><div class="line">        close(i); </div><div class="line">    chdir(&quot;/tmp&quot;);//改变工作目录到/tmp </div><div class="line">    umask(0);//重设文件创建掩模 </div><div class="line">    return; </div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/http_range/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/http_range/" itemprop="url">
                  一个实例讲解HTTP的断点续传
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-06T00:00:00+08:00">
                2014-11-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文以从服务器下载一个文件为例，讲解HTTP的断点续传功能。</p>
<p>客户端IP地址为：192.168.1.2<br>服务器IP地址为：192.168.1.3</p>
<h1 id="客户端向服务器发送请求"><a href="#客户端向服务器发送请求" class="headerlink" title="客户端向服务器发送请求"></a>客户端向服务器发送请求</h1><p>客户端向服务器发送的请求为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">GET /deepc.a HTTP/1.1</div><div class="line">Host: 192.168.100.189</div><div class="line">Connection: keep-alive</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.14 Safari/537.36</div><div class="line">Accept-Encoding: gzip,deflate,sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en;q=0.6</div></pre></td></tr></table></figure>
<p>从中可以看出请求的文件名为deepc.a文件。</p>
<h1 id="客户端向服务器发送具体请求"><a href="#客户端向服务器发送具体请求" class="headerlink" title="客户端向服务器发送具体请求"></a>客户端向服务器发送具体请求</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">GET /deepc.a HTTP/1.1</div><div class="line">Host: 192.168.100.189</div><div class="line">Connection: keep-alive</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.14 Safari/537.36</div><div class="line">Accept: */*</div><div class="line">Referer: http://192.168.100.189/deepc.a</div><div class="line">Accept-Encoding: gzip,deflate,sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en;q=0.6</div><div class="line">Range: bytes=0-32767</div></pre></td></tr></table></figure>
<p>Range字段表示请求文件的范围为0-32767。</p>
<h1 id="服务器响应"><a href="#服务器响应" class="headerlink" title="服务器响应"></a>服务器响应</h1><p>第一次服务器的HTTP响应报文如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">GET /deepc.a HTTP/1.1</div><div class="line">Host: 192.168.1.3</div><div class="line">Connection: keep-alive</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.14 Safari/537.36</div><div class="line">Accept: */*</div><div class="line">Referer: http://192.168.1.3/deepc.a</div><div class="line">Accept-Encoding: gzip,deflate,sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en;q=0.6</div><div class="line">Range: bytes=0-32767</div><div class="line"></div><div class="line">HTTP/1.1 206 Partial Content</div><div class="line">Date: Sun, 04 May 2014 05:14:54 GMT</div><div class="line">Server: Apache/2.4.4 (Win32) PHP/5.4.16</div><div class="line">Last-Modified: Sat, 03 May 2014 00:43:22 GMT</div><div class="line">ETag: &quot;7efce6-4f8742f6ed9b2&quot;</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: 32768</div><div class="line">Content-Range: bytes 0-32767/8322278</div><div class="line">Keep-Alive: timeout=5, max=100</div><div class="line">Connection: Keep-Alive</div></pre></td></tr></table></figure>
<p>HTTP的状态为206，表示服务器已经处理了部分HTTP相应。其中Content-Range字段表示服务器已经响应了0-32767个字节的文件内容。8322278表示文件的总长度为8322278字节。</p>
<h1 id="客户端继续向服务器发送请求"><a href="#客户端继续向服务器发送请求" class="headerlink" title="客户端继续向服务器发送请求"></a>客户端继续向服务器发送请求</h1><p>客户端根据上次HTTP报文中服务器已经返回给的客户端的数据情况继续向服务器发送请求报文，向服务器发送的请求报文内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">GET /deepc.a HTTP/1.1</div><div class="line">Host: 192.168.100.189</div><div class="line">Connection: keep-alive</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.14 Safari/537.36</div><div class="line">Accept: */*</div><div class="line">Referer: http://192.168.100.189/deepc.a</div><div class="line">Accept-Encoding: gzip,deflate,sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en;q=0.6</div><div class="line">Range: bytes=32768-8322277</div><div class="line">If-Range: &quot;7efce6-4f8742f6ed9b2&quot;</div><div class="line"></div><div class="line">HTTP/1.1 206 Partial Content</div><div class="line">Date: Sun, 04 May 2014 05:14:54 GMT</div><div class="line">Server: Apache/2.4.4 (Win32) PHP/5.4.16</div><div class="line">Last-Modified: Sat, 03 May 2014 00:43:22 GMT</div><div class="line">ETag: &quot;7efce6-4f8742f6ed9b2&quot;</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: 8289510</div><div class="line">Content-Range: bytes 32768-8322277/8322278</div><div class="line">Keep-Alive: timeout=5, max=98</div><div class="line">Connection: Keep-Alive</div></pre></td></tr></table></figure>
<p>Content-Range的内容表示客户端向服务器请求文件中32768-8322277之间的字节数据。</p>
<h1 id="第二次服务器的HTTP响应报文如下："><a href="#第二次服务器的HTTP响应报文如下：" class="headerlink" title="第二次服务器的HTTP响应报文如下："></a>第二次服务器的HTTP响应报文如下：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 206 Partial Content</div><div class="line">Date: Sun, 04 May 2014 05:14:54 GMT</div><div class="line">Server: Apache/2.4.4 (Win32) PHP/5.4.16</div><div class="line">Last-Modified: Sat, 03 May 2014 00:43:22 GMT</div><div class="line">ETag: &quot;7efce6-4f8742f6ed9b2&quot;</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: 8289510</div><div class="line">Content-Range: bytes 32768-8322277/8322278</div><div class="line">Keep-Alive: timeout=5, max=98</div><div class="line">Connection: Keep-Alive</div></pre></td></tr></table></figure>
<p>表示服务器已经相应完成了32768-8322277之间的数据。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/github_fork_sync/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/github_fork_sync/" itemprop="url">
                  在github上同步fork的项目
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-02T00:00:00+08:00">
                2014-11-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在github上可以fork别人的项目成为自己的项目，但是当fork的项目更新后自己fork的项目应该怎么怎么更新呢？我从网上看到了两种方式，一种是采用github的web界面中的操作来实现，具体是通过“Pull Request”功能来实现；另外一种是通过在本地合并代码分支的方式来解决。本文将采用第二种方式，以我最近fork的项目为例来说明。</p>
<h1 id="将fork后自己的项目clone到本地"><a href="#将fork后自己的项目clone到本地" class="headerlink" title="将fork后自己的项目clone到本地"></a>将fork后自己的项目clone到本地</h1><p>执行<code>git clone https://github.com/kuring/leetcode.git</code>即可将自己fork的代码更新到本地。</p>
<p>fork完成后的远程分支和所有分支情况如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">kuring@T420:/data/git/leetcode$ git remote -v</div><div class="line">origin	https://github.com/kuring/leetcode.git (fetch)</div><div class="line">origin	https://github.com/kuring/leetcode.git (push)</div><div class="line">kuring@T420:/data/git/leetcode$ git branch -a</div><div class="line">* master</div><div class="line">  remotes/origin/HEAD -&gt; origin/master</div><div class="line">  remotes/origin/master</div></pre></td></tr></table></figure>
<h1 id="将fork之前的项目clone到本地"><a href="#将fork之前的项目clone到本地" class="headerlink" title="将fork之前的项目clone到本地"></a>将fork之前的项目clone到本地</h1><p>将fork之前的项目添加到本地的远程分支haoel中，执行<code>git remote add haoel https://github.com/haoel/leetcode</code>。</p>
<p>再查看一下远程分支和所有分支情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">kuring@T420:/data/git/leetcode$ git remote -v</div><div class="line">haoel	https://github.com/haoel/leetcode (fetch)</div><div class="line">haoel	https://github.com/haoel/leetcode (push)</div><div class="line">origin	https://github.com/kuring/leetcode.git (fetch)</div><div class="line">origin	https://github.com/kuring/leetcode.git (push)</div><div class="line">kuring@T420:/data/git/leetcode$ git branch -a</div><div class="line">* master</div><div class="line">  remotes/origin/HEAD -&gt; origin/master</div><div class="line">  remotes/origin/master</div></pre></td></tr></table></figure>
<h1 id="将远程代码halel分支fetch到本地"><a href="#将远程代码halel分支fetch到本地" class="headerlink" title="将远程代码halel分支fetch到本地"></a>将远程代码halel分支fetch到本地</h1><p>执行<code>git fetch haoel</code>，此时的所有分支情况如下，可以看出多了一个remotes/haoel/master分支。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">kuring@T420:/data/git/leetcode$ git branch -a</div><div class="line">* master</div><div class="line">  remotes/haoel/master</div><div class="line">  remotes/origin/HEAD -&gt; origin/master</div><div class="line">  remotes/origin/master</div></pre></td></tr></table></figure>
<h1 id="将halel分支merge到本地的分支"><a href="#将halel分支merge到本地的分支" class="headerlink" title="将halel分支merge到本地的分支"></a>将halel分支merge到本地的分支</h1><p>执行<code>git merge remotes/haoel/master</code>，此时发现有冲突，提示内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">uring@T420:/data/git/leetcode$ git merge haoel/master</div><div class="line">自动合并 src/reverseInteger/reverseInteger.cpp</div><div class="line">冲突（内容）：合并冲突于 src/reverseInteger/reverseInteger.cpp</div><div class="line">自动合并失败，修正冲突然后提交修正的结果。</div></pre></td></tr></table></figure>
<p>之所以出现上述错误，这是由于我在fork之后在本地修正了源代码中的一处bug，而在fork之后到现在的时间间隔内原作者haoel也正好修正了该bug。打开文件后发现存在如下的内容，其实就是代码风格的问题，我这里将错误进行修正。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">36 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD                                                                                                                                                                </div><div class="line">37     while( x != 0 )&#123;</div><div class="line">38 =======</div><div class="line">39     while( x != 0)&#123;</div><div class="line">40 &gt;&gt;&gt;&gt;&gt;&gt;&gt; haoel/master</div></pre></td></tr></table></figure>
<p>如果没有冲突的情况下通过merge命令即会将haoel/master分支合并master分支并执行commit操作。可以通过<code>git status</code>命令看到当前冲突的文件和已经修改的文件。执行<code>git status</code>命令可以看到如下内容，说明未冲突的文件已经在暂存区，冲突的文件需要修改后执行add操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">kuring@T420:/data/git/leetcode$ git status</div><div class="line">位于分支 master</div><div class="line">您的分支与上游分支 &apos;origin/master&apos; 一致。</div><div class="line"></div><div class="line">您有尚未合并的路径。</div><div class="line">  （解决冲突并运行 &quot;git commit&quot;）</div><div class="line"></div><div class="line">要提交的变更：</div><div class="line"></div><div class="line">	修改:         src/3Sum/3Sum.cpp</div><div class="line">	修改:         src/4Sum/4Sum.cpp</div><div class="line">	修改:         src/LRUCache/LRUCache.cpp</div><div class="line">	......	// 此处省略了很多重复的</div><div class="line">	......</div><div class="line"></div><div class="line">未合并的路径：</div><div class="line">  （使用 &quot;git add &lt;file&gt;...&quot; 标记解决方案）</div><div class="line"></div><div class="line">	双方修改：     src/reverseInteger/reverseInteger.cpp</div></pre></td></tr></table></figure>
<p>解决完冲突后执行add操作后再通过<code>git status</code>命令查看的内容如下。通过<code>git status</code>命令却看不到已经解决的冲突文件，对于这一点我还是很理解，参考文章中的<a href="http://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6" target="_blank" rel="external">Git 分支 - 分支的新建与合并</a>是可以看到已经解决的冲突文件的，因为执行<code>git add</code>后将解决完成冲突的文件放到了暂存区中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">kuring@T420:/data/git/leetcode$ git status</div><div class="line">位于分支 master</div><div class="line">您的分支与上游分支 &apos;origin/master&apos; 一致。</div><div class="line"></div><div class="line">所有冲突已解决但您仍处于合并中。</div><div class="line">  （使用 &quot;git commit&quot; 结束合并）</div><div class="line"></div><div class="line">要提交的变更：</div><div class="line"></div><div class="line">	修改:         src/3Sum/3Sum.cpp</div><div class="line">	修改:         src/4Sum/4Sum.cpp</div><div class="line">	修改:         src/LRUCache/LRUCache.cpp</div><div class="line">	......	// 此处省略了很多重复的</div><div class="line">	......</div></pre></td></tr></table></figure>
<p>这里冲突后merge操作并没有执行commit操作，需要解决冲突后再手工执行commit操作，此时整个的同步操作就已经完成了。</p>
<h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>如果隔一段时间后又需要同步项目了仅需要执行<code>git fetch haoel</code>命令以下的操作即可。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="http://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6" target="_blank" rel="external">Git 分支 - 分支的新建与合并</a></li>
<li><a href="http://www.cnblogs.com/rubylouvre/archive/2013/01/24/2874694.html" target="_blank" rel="external">如何在github上fork一个项目来贡献代码以及同步原作者的修改</a></li>
<li><a href="http://blog.csdn.net/do_it__/article/details/7836513" target="_blank" rel="external">Github上更新自己fork的代码</a></li>
</ul>
<p>由于git命令较多，为了便于查阅增加一处git data transprot commands</p>
<p><img src="http://kuring.qiniudn.com/git_data_transport_commands.png" alt="Git图解"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/leetcode_unique_binary_search_trees_ii/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/leetcode_unique_binary_search_trees_ii/" itemprop="url">
                  Unique Binary Search Trees II
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-29T00:00:00+08:00">
                2014-09-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>Given n, generate all structurally unique BST’s (binary search trees) that store values 1…n.</p>
<p>For example,<br>Given n = 3, your program should return all 5 unique BST’s shown below.</p>
<pre style="font-family: Courier, monospace;">
   1         3     3      2      1
    \       /     /      / \      \
     3     2     1      1   3      2
    /     /       \                 \
   2     1         2                 3
</pre>

<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>要想能够生成多个树并存储到vector中，最容易想到的就是递归算法。要想能够递归，题目中提供的函数仅有一个参数，结合题目不能够完成递归的条件，考虑到unique binary search trees中的解法，需要递归具有两个参数的函数。</p>
<p>考虑到了递归的问题，还需要利用循环不断将树添加到vector中，这编写起来也是比较有难度，需要掌握循环的次数和什么时候将树添加到vector中。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span>&lt;TreeNode *&gt; generateTrees(<span class="keyword">int</span> n) &#123;</div><div class="line">	<span class="built_in">vector</span>&lt;TreeNode *&gt; sub_tree = generateTrees(<span class="number">1</span>, n);</div><div class="line">	<span class="keyword">return</span> sub_tree;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;TreeNode *&gt; generateTrees(<span class="keyword">int</span> low, <span class="keyword">int</span> high) &#123;</div><div class="line">	<span class="built_in">vector</span>&lt;TreeNode *&gt; result;</div><div class="line">	<span class="keyword">if</span> (low &gt; high)</div><div class="line">	&#123;</div><div class="line">		result.push_back(<span class="literal">NULL</span>);</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (low == high)</div><div class="line">	&#123;</div><div class="line">		TreeNode *node = <span class="keyword">new</span> TreeNode(low);</div><div class="line">		result.push_back(node);</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=low; i&lt;=high; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">vector</span>&lt;TreeNode *&gt; left = generateTrees(low, i - <span class="number">1</span>);</div><div class="line">		<span class="built_in">vector</span>&lt;TreeNode *&gt; right = generateTrees(i + <span class="number">1</span>, high);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;left.size(); j++)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;right.size(); k++)</div><div class="line">			&#123;</div><div class="line">				TreeNode *root = <span class="keyword">new</span> TreeNode(i);</div><div class="line">				root-&gt;left = left[j];</div><div class="line">				root-&gt;right = right[k];</div><div class="line">				result.push_back(root);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/traverse_graph/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/traverse_graph/" itemprop="url">
                  图的存储和遍历
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-28T00:00:00+08:00">
                2014-09-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="图的存储"><a href="#图的存储" class="headerlink" title="图的存储"></a>图的存储</h1><p>在leetcode中图的存储形式如下，这种形式的图只能适合用来存储是连通图的情况，且根据leetcode提供的<em>{0,1,2#1,2#2,2}</em>格式的字符串通过程序来自动构造图比较麻烦，预知字符串的含义请移步到<a href="https://oj.leetcode.com/problems/clone-graph/" target="_blank" rel="external">leetcode的解释</a>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for undirected graph.</div><div class="line"> * struct UndirectedGraphNode &#123;</div><div class="line"> *     int label;</div><div class="line"> *     vector&lt;UndirectedGraphNode *&gt; neighbors;</div><div class="line"> *     UndirectedGraphNode(int x) : label(x) &#123;&#125;;</div><div class="line"> * &#125;;</div></pre></td></tr></table></figure>
<p>本文为了能够用字符串表示所有图，并且便于程序的构造，使用了邻接表的形式来对图进行存储，即可以用来存储有向图，有可以存储无向图。图一个节点的结构如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 图节点的邻接表表示形式</div><div class="line"> */</div><div class="line"><span class="keyword">struct</span> GraphNode &#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> label;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; neighbors;</div><div class="line">    <span class="keyword">bool</span> visited;			<span class="comment">// 深度优先搜索和广度优先搜索的遍历都需要visited数组，为了简化程序，直接在节点的存储结构中设置visited变量</span></div><div class="line">    GraphNode(<span class="built_in">std</span>::<span class="built_in">string</span> x) : label(x), visited(<span class="literal">false</span>) &#123;&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>图的创建方面为了简化算法实现，对程序的效率没做太多关注，算法复杂度稍高。本算法的难点在于对字符串的拆解，并根据字符串找到对应的节点指针。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 图节点的邻接表表示形式</div><div class="line"> */</div><div class="line"><span class="keyword">struct</span> GraphNode &#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> label;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; neighbors;</div><div class="line">    <span class="keyword">bool</span> visited;</div><div class="line">    GraphNode(<span class="built_in">std</span>::<span class="built_in">string</span> x) : label(x), visited(<span class="literal">false</span>) &#123;&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 通过字符串的值，找到该字符串对应的图节点</div><div class="line"> */ </div><div class="line"><span class="function">GraphNode *<span class="title">get_one_node</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; &amp;node_vector, <span class="built_in">std</span>::<span class="built_in">string</span> str)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::const_iterator iter = node_vector.begin(); iter != node_vector.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> ((*iter)-&gt;label == str)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> *iter;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 时间复杂度高,对图的构建一般效率要求较低</div><div class="line"> * 对于查找某个节点的邻接点的指针操作可以使用map来提高查询效率</div><div class="line"> * 或者可以通过不需要初始化所有节点的方式来构造图，而是采用需要哪个节点构造哪个节点的方式</div><div class="line"> */</div><div class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; create_graph(<span class="built_in">std</span>::<span class="built_in">string</span> str)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; node_vector;</div><div class="line">   </div><div class="line">    <span class="comment">// init all nodes</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> pos = <span class="number">0</span>; pos &lt; str.length() - <span class="number">1</span>;)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">size_t</span> end = str.find(<span class="string">','</span>, pos);</div><div class="line">        <span class="keyword">if</span> (end != <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</div><div class="line">        &#123;</div><div class="line">            GraphNode *node = <span class="keyword">new</span> GraphNode(str.substr(pos, end - pos));</div><div class="line">            node_vector.push_back(node);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        pos = str.find(<span class="string">'#'</span>, pos);</div><div class="line">        <span class="keyword">if</span> (pos == <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            pos++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// add neighbors in every node</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> pos = <span class="number">0</span>; pos &lt; str.length() - <span class="number">1</span>; )</div><div class="line">    &#123;</div><div class="line">        GraphNode *current_node = <span class="literal">NULL</span>;</div><div class="line">        <span class="keyword">size_t</span> current_end = str.find(<span class="string">','</span>, pos);</div><div class="line">        <span class="keyword">if</span> (current_end != <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</div><div class="line">        &#123;</div><div class="line">            current_node = get_one_node(node_vector, str.substr(pos, current_end - pos));</div><div class="line">            pos = current_end + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">size_t</span> node_end = str.find(<span class="string">'#'</span>, pos);   <span class="comment">// 当前节点的字符串的结束位置</span></div><div class="line">        <span class="keyword">if</span> (node_end == <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</div><div class="line">        &#123;</div><div class="line">            node_end = str.length();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            node_end--;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> ( ; ; )</div><div class="line">        &#123;</div><div class="line">            current_end = str.find(<span class="string">','</span>, pos);</div><div class="line">            <span class="keyword">if</span> (current_end &gt; node_end || current_end == <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">// 一个节点的最后一个邻接点</span></div><div class="line">                current_end = node_end;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> </div><div class="line">            &#123;</div><div class="line">                current_end--;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            GraphNode *node = get_one_node(node_vector, str.substr(pos, current_end - pos + <span class="number">1</span>)); </div><div class="line">            <span class="keyword">if</span> (node != <span class="literal">NULL</span>)</div><div class="line">            &#123;</div><div class="line">                current_node-&gt;neighbors.push_back(node);</div><div class="line">                <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; current_node-&gt;label &lt;&lt; <span class="string">" add "</span> &lt;&lt; node-&gt;label &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (current_end == node_end)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">// 一个节点的最后一个邻接点</span></div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span></div><div class="line">            &#123;</div><div class="line">                pos = current_end + <span class="number">2</span>;  <span class="comment">// 该节点之后还有其他邻接点</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        pos = node_end + <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> node_vector;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="深度优先搜索"><a href="#深度优先搜索" class="headerlink" title="深度优先搜索"></a>深度优先搜索</h1><p>深度优先搜索遵循贪心算法的原理，如果孩子节点不为空，则一直遍历下去。</p>
<h2 id="递归算法"><a href="#递归算法" class="headerlink" title="递归算法"></a>递归算法</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS_traverse_recursion</span><span class="params">(GraphNode *node)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!node-&gt;visited)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; node-&gt;label &lt;&lt; <span class="string">'\t'</span>;</div><div class="line">        node-&gt;visited = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = node-&gt;neighbors.begin(); iter != node-&gt;neighbors.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (!(*iter)-&gt;visited)</div><div class="line">        &#123;</div><div class="line">            DFS_traverse_recursion(*iter);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 图的深度优先搜索的递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS_traverse_recursion</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; &amp;graph)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        (*iter)-&gt;visited = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (!(*iter)-&gt;visited)</div><div class="line">            DFS_traverse_recursion(*iter);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="非递归算法"><a href="#非递归算法" class="headerlink" title="非递归算法"></a>非递归算法</h2><p>使用栈来实现非递归。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 图的深度优先搜索的非递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS_traverse_not_recursion</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; &amp;graph)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        (*iter)-&gt;visited = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;GraphNode *&gt; node_stack;</div><div class="line">        <span class="keyword">if</span> ((*iter)-&gt;visited)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        node_stack.push(*iter);</div><div class="line">        <span class="keyword">while</span> (!node_stack.empty())</div><div class="line">        &#123;</div><div class="line">            GraphNode *node = node_stack.top();</div><div class="line">            node_stack.pop();</div><div class="line">            <span class="keyword">if</span> (node-&gt;visited)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; node-&gt;label &lt;&lt; <span class="string">'\t'</span>;</div><div class="line">            node-&gt;visited = <span class="literal">true</span>;</div><div class="line">            <span class="comment">/* 使用反向迭代器遍历后将节点加入到栈中 */</span></div><div class="line">            <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::reverse_iterator iter2 = node-&gt;neighbors.rbegin(); iter2 != node-&gt;neighbors.rend(); iter2++)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span> (!(*iter2)-&gt;visited)</div><div class="line">                &#123;</div><div class="line">                    node_stack.push(*iter2);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="广度优先搜索"><a href="#广度优先搜索" class="headerlink" title="广度优先搜索"></a>广度优先搜索</h1><p>该算法不存在递归算法，仅有非递归版本。需要利用队列来保存需要遍历的节点，占用的存储空间稍多。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 图的广度优先搜索的非递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFS_traverse_not_recursion</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt; &amp;graph)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        (*iter)-&gt;visited = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter = graph.begin(); iter != graph.end(); iter++)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">std</span>::<span class="built_in">queue</span>&lt;GraphNode *&gt; node_queue;</div><div class="line">        <span class="keyword">if</span> ((*iter)-&gt;visited)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        node_queue.push(*iter);</div><div class="line">        <span class="keyword">while</span> (!node_queue.empty())</div><div class="line">        &#123;</div><div class="line">            GraphNode *node = node_queue.front();</div><div class="line">            node_queue.pop();</div><div class="line">            <span class="keyword">if</span> (node-&gt;visited)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; node-&gt;label &lt;&lt; <span class="string">'\t'</span>;</div><div class="line">            node-&gt;visited = <span class="literal">true</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GraphNode *&gt;::iterator iter2 = node-&gt;neighbors.begin(); iter2 != node-&gt;neighbors.end(); iter2++)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span> (!(*iter2)-&gt;visited)</div><div class="line">                &#123;</div><div class="line">                    node_queue.push(*iter2);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="相关下载"><a href="#相关下载" class="headerlink" title="相关下载"></a>相关下载</h1><p><a href="http://pan.baidu.com/s/1i3GIj9V" target="_blank" rel="external">本文相关源码</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/traverse_tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/traverse_tree/" itemprop="url">
                  二叉树的遍历
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-28T00:00:00+08:00">
                2014-09-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<p>近期准备复习数据结构和算法的知识，参照了网络上各路大神的学习攻略，大部分算法学习的思路为参照一些经典书籍（如算法导论）并结合一些代码的实践来完成，并未找到一条适合我的算法学习之路。经过思考后决定采用代码编写曾经的教科书中代码实例的方式来学习，曾经接触的算法教科书包括《数据结构（C语言版）》和《计算机算法基础》。一来这些算法已经基本熟悉，只是时间久远有些已经忘记；二来，通过思考后编写代码增强自己的记忆。</p>
<p>同时我编写的这些实例可以作为leetcode上的很多题目的基础，为下一个阶段刷leetcode上的题目打好基础。</p>
<p>树的存储形式包括了顺序存储（采用数组形式）和链式存储，其中链式存储更为灵活，可以表示任意形式的树，本文中的代码将采用树的链式存储方式。</p>
<h1 id="树的构建"><a href="#树的构建" class="headerlink" title="树的构建"></a>树的构建</h1><p>树的构建有多种方式，本文使用字符串采用了自顶向下、自左到右的顺序构建树，跟leetcode的形式一致。其中’#’表示该节点为空，如果该节点为空节点，其左右子孩子节点也要用’#’表示，而不能不用任何字符表示。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 二叉树的链式存储结构</div><div class="line"> */</div><div class="line"><span class="keyword">struct</span> TreeNode</div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> data;</div><div class="line">    <span class="keyword">struct</span> TreeNode *left;</div><div class="line">    <span class="keyword">struct</span> TreeNode *right;</div><div class="line">    TreeNode(<span class="keyword">char</span> data) : data(data), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 构造二叉树，要构造的字符串采用了自顶向下、自左到右的顺序，跟leetcode的形式一致</div><div class="line"> */</div><div class="line"><span class="function">TreeNode *<span class="title">create_binary_tree</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!str || <span class="built_in">strlen</span>(str) == <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 对每个节点分配存储空间</span></div><div class="line">    <span class="keyword">int</span> node_size = <span class="built_in">strlen</span>(str);</div><div class="line">    TreeNode **tree = <span class="keyword">new</span> TreeNode*[node_size];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;node_size; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (str[i] == <span class="string">'#'</span>)</div><div class="line">        &#123;</div><div class="line">            tree[i] = <span class="literal">NULL</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            tree[i] = <span class="keyword">new</span> TreeNode(str[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>; i&lt;node_size &amp;&amp; j&lt;node_size; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (tree[i] != <span class="literal">NULL</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> ((j + <span class="number">1</span>) &lt; node_size)</div><div class="line">            &#123;</div><div class="line">                tree[i]-&gt;left = tree[++j];</div><div class="line">                tree[i]-&gt;right = tree[++j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            j += <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> *tree;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉树的先序遍历"><a href="#二叉树的先序遍历" class="headerlink" title="二叉树的先序遍历"></a>二叉树的先序遍历</h1><h2 id="递归实现"><a href="#递归实现" class="headerlink" title="递归实现"></a>递归实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 先序遍历二叉树的递归形式</div><div class="line"> */</div><div class="line">void preorder_traverse_recursion(TreeNode *root)</div><div class="line">&#123;</div><div class="line">    if (!root)</div><div class="line">    &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    printf(&quot;%c\t&quot;, root-&gt;data);</div><div class="line">    </div><div class="line">    preorder_traverse_recursion(root-&gt;left);</div><div class="line"></div><div class="line">    preorder_traverse_recursion(root-&gt;right);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="非递归实现"><a href="#非递归实现" class="headerlink" title="非递归实现"></a>非递归实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 先序遍历的非递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">preorder_traverse_not_recursion</span><span class="params">(TreeNode *root)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!root)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode *&gt; tree_stack;</div><div class="line">    tree_stack.push(root);</div><div class="line">    <span class="keyword">while</span> (tree_stack.size() &gt; <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        TreeNode *node = tree_stack.top();</div><div class="line">        tree_stack.pop();</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%c\t"</span>, node-&gt;data);</div><div class="line">        <span class="keyword">if</span> (node-&gt;right != <span class="literal">NULL</span>)</div><div class="line">        &#123;</div><div class="line">            tree_stack.push(node-&gt;right);   </div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (node-&gt;left != <span class="literal">NULL</span>)</div><div class="line">        &#123;</div><div class="line">            tree_stack.push(node-&gt;left);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉树的中序遍历"><a href="#二叉树的中序遍历" class="headerlink" title="二叉树的中序遍历"></a>二叉树的中序遍历</h1><h2 id="递归实现-1"><a href="#递归实现-1" class="headerlink" title="递归实现"></a>递归实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 中序遍历二叉树的递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder_traverse_recursion</span><span class="params">(TreeNode *root)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!root)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    inorder_traverse_recursion(root-&gt;left);</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%c\t"</span>, root-&gt;data);</div><div class="line"></div><div class="line">    inorder_traverse_recursion(root-&gt;right);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="非递归实现-1"><a href="#非递归实现-1" class="headerlink" title="非递归实现"></a>非递归实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 中序遍历二叉树的非递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder_traverse_not_recursion</span><span class="params">(TreeNode *root)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!root)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode *&gt; tree_stack;</div><div class="line">    <span class="keyword">while</span> (root != <span class="literal">NULL</span> || tree_stack.size() &gt; <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// 遍历到左子树的叶子节点</span></div><div class="line">        <span class="keyword">while</span> (root)</div><div class="line">        &#123;</div><div class="line">            tree_stack.push(root);</div><div class="line">            root = root-&gt;left;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 遍历栈顶节点</span></div><div class="line">        root = tree_stack.top();</div><div class="line">        tree_stack.pop();</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%c\t"</span>, root-&gt;data);</div><div class="line"></div><div class="line">        root = root-&gt;right;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="二叉树的后序遍历"><a href="#二叉树的后序遍历" class="headerlink" title="二叉树的后序遍历"></a>二叉树的后序遍历</h1><h2 id="递归实现-2"><a href="#递归实现-2" class="headerlink" title="递归实现"></a>递归实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 后序遍历二叉树的递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">postorder_traverse_recursion</span><span class="params">(TreeNode *root)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!root)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    postorder_traverse_recursion(root-&gt;left);</div><div class="line">    </div><div class="line">    postorder_traverse_recursion(root-&gt;right);</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%c\t"</span>, root-&gt;data);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="非递归实现-2"><a href="#非递归实现-2" class="headerlink" title="非递归实现"></a>非递归实现</h2><p>仅用一个栈不能够实现后序遍历非递归算法，需要保存一个上次访问过节点的变量。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 后序遍历二叉树的非递归形式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">postorder_traverse_not_recursion</span><span class="params">(TreeNode *root)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!root)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode *&gt; tree_stack;</div><div class="line">    TreeNode *visited = <span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">while</span> (root != <span class="literal">NULL</span> || tree_stack.size() &gt; <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// 遍历到左子树的叶子节点</span></div><div class="line">        <span class="keyword">while</span> (root)</div><div class="line">        &#123;</div><div class="line">            tree_stack.push(root);</div><div class="line">            root = root-&gt;left;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        root = tree_stack.top();</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (root-&gt;right == <span class="literal">NULL</span> || root-&gt;right == visited)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">// 如果没有右孩子，或者右孩子刚刚访问过，则访问当前节点</span></div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%c\t"</span>, root-&gt;data);</div><div class="line">            tree_stack.pop();</div><div class="line">            visited = root;</div><div class="line">            root = <span class="literal">NULL</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            root = root-&gt;right;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>二叉树遍历的递归形式程序结构类似，编写相对简单。但是递归方法在C语言中存在执行效率差（需要维护函数栈），容易出现栈溢出的异常的问题。任何递归问题问题都可以转化为非递归问题，转化的思路包括了直接转化法和间接转化法。直接转化法可以通过循环来解决，间接转化法需要借助栈加循环来解决。</p>
<p>二叉树遍历的非递归形式相对复杂，二叉树的先序遍历的非递归形式容易理解，二叉树的中序遍历稍微困难，后序遍历的非递归形式最复杂。</p>
<h1 id="相关下载"><a href="#相关下载" class="headerlink" title="相关下载"></a>相关下载</h1><p><a href="http://pan.baidu.com/s/1eQmweSM" target="_blank" rel="external">程序源代码</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_convert_ary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_convert_ary/" itemprop="url">
                  Linux下通过命令行进行进制转换
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-27T00:00:00+08:00">
                2014-09-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Windows下可以通过计算器进行进制之间的转换，非常方便。本文总结Linux下可用的进行进制之间的转换方法。</p>
<h1 id="利用shell"><a href="#利用shell" class="headerlink" title="利用shell"></a>利用shell</h1><p>shell脚本默认数值是由10进制数处理，除非这个数字某种特殊的标记法或前缀开头，才可以表示其它进制类型数值。如：以0开头就是8进制、以0x开头就是16进制数。使用“BASE#NUMBER”这种形式可以表示其它进制。BASE值的范围为2-64。</p>
<p>其他进制转10进制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">kuring@T420:~$ echo $((16#4000000))</div><div class="line">67108864</div><div class="line">kuring@T420:~$ echo $((2#111))</div><div class="line">7</div><div class="line">kuring@T420:~$ echo $((0x10))</div><div class="line">16</div><div class="line">kuring@T420:~$ echo $((010))</div><div class="line">8</div><div class="line"></div><div class="line">// 对进制转换为10进制进行运算，稍显啰嗦</div><div class="line">kuring@T420:~$ echo $(($((16#4000000))/1014/1024));</div><div class="line">64</div></pre></td></tr></table></figure>
<h1 id="利用let命令"><a href="#利用let命令" class="headerlink" title="利用let命令"></a>利用let命令</h1><p>let用来执行算数运算和数值表达式测试。可以利用该命令完成简单的计算，并将计算结果赋给其他变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 对进制转换为10进制后进行运算，比纯shell方式简洁</div><div class="line">kuring@T420:~$ let a=$((16#4000000))/1014/1024;</div><div class="line">kuring@T420:~$ echo $a</div><div class="line">64</div></pre></td></tr></table></figure>
<h1 id="利用bc命令"><a href="#利用bc命令" class="headerlink" title="利用bc命令"></a>利用bc命令</h1><p>该命令是一个强大的计算器软件，可以利用其中的ibase和obase进行输入进制的转换，ibase表示输入数字的进制，obase表示输出数字的进制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 如果没有制定，则默认为10进制</div><div class="line">// 对于16进制，要使用F，而不能使用f</div><div class="line">kuring@T420:~$ echo &quot;ibase=16;FF&quot; | bc</div><div class="line">255</div><div class="line">kuring@T420:~$ echo &quot;obase=2;ibase=16;FF&quot; | bc</div><div class="line">11111111</div></pre></td></tr></table></figure>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="http://www.cnblogs.com/chengmo/archive/2010/10/14/1851570.html" target="_blank" rel="external">linux shell 不同进制数据转换（二进制，八进制，十六进制，base64)</a></p>
<p><a href="http://blog.csdn.net/fengyuxing168/article/details/8896955" target="_blank" rel="external">Shell进制转换小结</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/min_stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/min_stack/" itemprop="url">
                  leetcode题目之Min Stack
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-27T00:00:00+08:00">
                2014-09-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><blockquote>
<p>Memory Limit Exceeded</p>
<p>Design a stack that supports push, pop, top, and retrieving the minimum element in constant time.</p>
<p>push(x) – Push element x onto stack.<br>pop() – Removes the element on top of the stack.<br>top() – Get the top element.<br>getMin() – Retrieve the minimum element in the stack.</p>
</blockquote>
<h1 id="错误代码"><a href="#错误代码" class="headerlink" title="错误代码"></a>错误代码</h1><p>看到此题目，以为是用实现一个简单的栈结构，于是就直接写下了如下代码，采用了双向链表的方式来实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> MinStack &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="keyword">struct</span> Node</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> data;</div><div class="line">		Node *next;</div><div class="line">		Node *pre;</div><div class="line">		Node() : next(<span class="literal">NULL</span>),pre(<span class="literal">NULL</span>) &#123;&#125;; </div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	MinStack()</div><div class="line">	&#123;</div><div class="line">		header = <span class="keyword">new</span> Node();</div><div class="line">		tail = header;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        Node *node = <span class="keyword">new</span> Node();</div><div class="line">		node-&gt;data = x;</div><div class="line">		node-&gt;pre = tail;</div><div class="line">		tail-&gt;next = node;</div><div class="line">		tail = node;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">        Node *pre = tail-&gt;pre;</div><div class="line">		<span class="keyword">delete</span> tail;</div><div class="line">		tail = pre;</div><div class="line">		tail-&gt;next = <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (tail == header)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">		&#125;</div><div class="line">        <span class="keyword">return</span> tail-&gt;data;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMin</span><span class="params">()</span> </span>&#123;</div><div class="line">		Node *begin = header-&gt;next;</div><div class="line">		<span class="keyword">int</span> min = INT_MIN;</div><div class="line">        <span class="keyword">while</span>(begin)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (min &gt; begin-&gt;data)</div><div class="line">			&#123;</div><div class="line">				min = begin-&gt;data;</div><div class="line">			&#125;</div><div class="line">			begin = begin-&gt;next;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> min;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	Node *header;</div><div class="line">	Node *tail;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>提交后提示<code>Memory Limit Exceeded</code>错误，开始考虑是不是双向链表占用的空间过多。</p>
<h1 id="正确代码"><a href="#正确代码" class="headerlink" title="正确代码"></a>正确代码</h1><p>仔细看题目后发现<code>retrieving the minimum element in constant time</code>，即时间复杂度为O(1)，上述实现代码时间复杂度为O(n)，明显不符合要求。看来理解题目有误，不是为了实现栈类，而是为了利用数据结构解决获取最小值问题。</p>
<p>经过考虑后可以通过在类内部维护存储最小值的栈来解决，存储最小值的栈除了需要存储最小值外，还需要维护最小值个数。</p>
<p>实现代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> MinStack &#123;</div><div class="line">	<span class="keyword">struct</span> MinUnit</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> count;</div><div class="line">		<span class="keyword">int</span> value;</div><div class="line">		MinUnit(<span class="keyword">int</span> count, <span class="keyword">int</span> value) : count(count), value(value) &#123;&#125;;</div><div class="line">	&#125;;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        data_stack.push(x);</div><div class="line">		<span class="keyword">if</span> (min_stack.empty() || x &lt; min_stack.top()-&gt;value)</div><div class="line">		&#123;</div><div class="line">			MinUnit *p_unit = <span class="keyword">new</span> MinUnit(<span class="number">1</span>, x);</div><div class="line">			min_stack.push(p_unit);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (x == min_stack.top()-&gt;value)</div><div class="line">		&#123;</div><div class="line">			min_stack.top()-&gt;count++;</div><div class="line">		&#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (data_stack.top() == min_stack.top()-&gt;value)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (min_stack.top()-&gt;count == <span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				MinUnit *punit = min_stack.top();</div><div class="line">				min_stack.pop();</div><div class="line">				<span class="keyword">delete</span> punit;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				min_stack.top()-&gt;count--;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		data_stack.pop();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> data_stack.top();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMin</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> min_stack.top()-&gt;value;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; data_stack;</div><div class="line">	<span class="comment">// 最小栈，为了便于修改栈单元中的count值，采用存储指针方式</span></div><div class="line">	<span class="built_in">std</span>::<span class="built_in">stack</span>&lt;MinUnit*&gt; min_stack;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_io/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/linux_io/" itemprop="url">
                  Linux IO模型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-16T00:00:00+08:00">
                2014-09-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由于I/O模型现在掌握还不够透彻，本文仅列出了一些I/O模型中的一些常用概念，对于select、poll、epoll和信号驱动I/O等模型理解还不够透彻，待理解透彻后补上。</p>
<h1 id="阻塞I-O与非阻塞I-O"><a href="#阻塞I-O与非阻塞I-O" class="headerlink" title="阻塞I/O与非阻塞I/O"></a>阻塞I/O与非阻塞I/O</h1><p>阻塞I/O：当进行I/O操作后，程序处于等待状态，直到需要的资源可用为止。</p>
<p>非阻塞I/O：当进行I/O操作后，函数直接返回，不需要等待。</p>
<h1 id="两种文件描述符准备就绪的通知模式"><a href="#两种文件描述符准备就绪的通知模式" class="headerlink" title="两种文件描述符准备就绪的通知模式"></a>两种文件描述符准备就绪的通知模式</h1><p>水平触发通知：如果文件描述符上可以非阻塞地执行I/O系统调用，此时认为它已经就绪。允许在任意时刻重复检测I/O状态，没有必要每次当文件描述符就绪后尽可能多的执行I/O。其中select()和poll()属于水平触发通知模式。</p>
<p>边缘触发通知：如果文件描述符自上次状态检查以来有了新的I/O活动，此时需要触发通知。只有当I/O事件发生后才会得到通知，在另外一个I/O事件到来之前不会得到通知。因此，在接收到一个I/O事件后，程序在某个时刻应该在相应的文件描述符上尽可能多地执行I/O。每个被检查的文件描述符被置为非阻塞模式，在得到I/O事件通知后重复执行I/O操作，直到系统调用返回错误为止。其中信号驱动I/O属于此种类型。</p>
<p>将的通俗一点，假设通过异步I/O读取socket数据，当接收到100个字节的数据后，这时候会触发通知给应用程序。如果应用程序仅读取了50字节的数据，重新调用异步I/O函数时，在水平触发时仍然会得到通知，而采用边缘触发时不会得到通知。</p>
<p>epoll即可以采用水平触发通知方式，也可以采用边缘触发通知方式。</p>
<p>这两个概念对于理解Linux的I/O模型非常重要，但是却是不容易理解。可以通过举例说明：一个管道内收到了数据，注册该管道描述符的epoll返回，但是用户只读取了一部分数据，然后再次调用了epoll。这时，如果是水平触发方式，epoll将立刻返回，因为当前有数据可读，满足IO就绪的要求；但是如果是边沿触发方式，epoll不会返回，因为调用之后还没有新的IO事件发生，直到有新的数据到来，epoll才会返回，用户可以一并读到老的数据和新的数据。</p>
<h1 id="同步I-O与异步I-O"><a href="#同步I-O与异步I-O" class="headerlink" title="同步I/O与异步I/O"></a>同步I/O与异步I/O</h1><p>同步I/O：发出I/O操作后，后面操作不能进行，要么等待I/O操作完成，要么放弃I/O操作。后面的操作和当前的操作只能有一个进行。</p>
<p>异步I/O：发出I/O操作后，马上返回继续执行后面的操作，而I/O操作同时执行。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li>《Linux/UNIX系统编程手册》第63章</li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3NDM1NjUwMQ==&amp;mid=200266959&amp;idx=1&amp;sn=fa2240310c3995284bc9da3878ca07be&amp;scene=1#rd" target="_blank" rel="external">浅析Linux IO技术体系</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/yunan_travel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kuring Lyu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一只特立独行的鸟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/yunan_travel/" itemprop="url">
                  云南之旅
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-08-22T00:00:00+08:00">
                2014-08-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://kuring.qiniudn.com/yunan.JPG" alt="云南" title="云南"></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在这个炎热的夏天，在一个特殊的月份，我开启了一段8天7晚的云南之旅。出于资金方面和省心方面的考虑，选择跟团旅游。本次的旅行包含了昆明、大理、丽江和香格里拉四个地点，如果不是跟团，在短短的6天的旅行时间之内不可能走完四个地方的多个景点，因为这四个地方之间的距离坐车基本都在四个小时以上。大多数人去云南还是会选择跟团的，因为跟团省太多事了。如果是独自出行，每天光查路线路、找酒店、查攻略就会浪费掉很大一部分时间，肯定会更自由一些，但是绝对不会走过这么多地方。</p>
<p>跟团也有很多不好的地方，本次出行旅行社制定的路线为“出发地-昆明-大理-丽江-香格里拉-丽江-大理-昆明-目的地”，可以看到路线是重复了一遍，相当于很大一部分时间都浪费在了路上，至少相当于浪费了4+4+4共12个小时的时间，这也就造成了每天早晨需要很早就起床，基本在6点半就坐在大巴上出发了。之所以每天早晨会很早就起床，另一个原因是因为现在是云南旅游的旺季，一旦稍微晚些，很多景点就会排队等好长时间，可能晚起10分钟，就要在景区多排一个小时的队。</p>
<p>跟团的价格之所以便宜，听导游说，这是云南省旅游局的决定。云南绝大多数都是高原山区地貌，交通不够发达。旅游业在云南的经济中占有很大的比重，政府想通过旅游来拉动经济，跟团价格便宜，自然需要在旅游过程中的消费来赚钱。本次旅游的过程中，也有几次购物的经历，其中行程中的大理十八里铺和七彩云南是赤裸裸的购物环节，导游也明确的告知了。在去景点的过程中，很明显发现每个景点的必经通道中均有购物的部分，这是云南的景点和我去过的其他景点比较大的差别。最奇葩的是长江第一弯的观景楼，大约7层楼左右的样子，每层楼的楼梯都不在一个位置，从一层的楼梯走到另一层的楼梯必经卖土特产的柜台，楼层上全是卖土特产的。其实长江第一弯也仅有一个观景楼而已，因此是免费的。</p>
<p>跟团很大一部分时间都在坐车上，游览景点的时间确实非常紧，而导游给的购物地方的时间确实非常充裕。比如游览石林仅给了一个半小时左右的时间，石林是国家的5A级景区，门票价格是170，是本次行程中最贵的景点了吧。石林虽然不大，但是要想在一个半小时内全部游览完是不可能的，因此只能走马观花，没办法，跟团走就只能认了。</p>
<p>之所以要写下这段行程，是因为这段旅行对我而言有着不一般的意义，我想将这段记忆铭记在心。不幸的是，回家后发现单反的SD卡出问题了，照片丢失了很大一部分。我虽不是很认同旅游就是为了拍照，现在人们已经过度的重视拍照而忽略了旅行本身的意义，但是这些照片在这次旅行中确实不可或缺的。</p>
<hr>
<h1 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h1><p>下午三点多就到了春城昆明，抬头一看昆明的天果然不一般，云彩非常多，而且离地面非常近，轮廓感很强。阳光非常强烈，气温虽然不高，但是紫外线较强，阳光照在皮肤上生疼。不像在济南只能看到的雾霾，济南即使有云也是在雾霾之上，从地面看去毫无层次感。找到旅行社后机场接送人员送往酒店，稍事休息后去到昆明市中心的南屏街。从整体看，昆明的市容跟济南相仿，属于不是很繁华的类别，但是却属于省会的档次。下图照片我第一晚酒店的照片，大家感受一下云。</p>
<p><img src="http://kuring.qiniudn.com/yunnan_jinshengyuan.JPG" alt="金生源" title="金生源大酒店"></p>
<p>晚上和朋友在一家彝族的菜馆吃饭，对于北方的我来说，南方的饭菜吃起来不太习惯，米饭是生硬的，汤是油腻的，菜是辣的且没滋味。</p>
<p>吃完饭后准备坐公交回酒店，已经晚上九点半左右了，想抬头看看能不能看到星星，居然看到满天的云，真是奇特。在山东即使晚上有满天的云，也绝对达不到昆明的云的明亮程度。造成这种现象有两个原因，一是昆明属于东七区，比北京时间要晚上一个小时；二是，云南的云离得地面更近且多。</p>
<hr>
<h1 id="Day-2"><a href="#Day-2" class="headerlink" title="Day 2"></a>Day 2</h1><p>这是悲催的一天，按照行程，要走“昆明—大理—丽江（昆明大理行车约4.5小时，大理-丽江行车约2小时车程）”的路程。早晨一起床，要去餐厅吃早饭，发现餐厅乌秧乌秧的全是人啊，找个地方吃饭都难，在艰难中吃完了早餐。期间一女同胞不小心打碎了一个碗，餐厅老板要了女顾客10块钱，心想真黑啊，几毛钱一个碗至于要这么多吗？</p>
<p>吃完饭后，餐厅外面和酒店大堂全是游客，经过电话沟通后找到了导游。导游点名后坐上了悲催的大巴。幸运的是，导游还不错，东北小伙，在云南上的大学。云南的旅游大巴都是车牌号都是统一编号的，车牌号以“L“开头，表示旅游的含义。旅游大巴启动后，雨就开始稀里哗啦的下起来了，运气还不错。</p>
<p>旅游大巴在高速上要在好多地方做例行检查，大约9点左右行驶到楚雄地段的某个高速检查点时，我们大巴的右侧玻璃跟后面的大巴的左侧后视镜摩擦而过，因为我就坐在后排，眼睁睁的目睹了这一过程。结果我们大巴右侧玻璃和后面大巴的左侧后视镜全部挂掉了，幸好没有驴友受伤情况，有图有真相。</p>
<p><img src="http://kuring.qiniudn.com/yunnan_daba.JPG" alt="旅游大巴" title="旅游大巴受伤后的样子"></p>
<p>在服务区经过1个小时的等待后大巴向前走了，目的地不是大理，而是前方的某个小镇。因为大巴没了挡风玻璃，速度也上不去了，在后面坐着还是相当凉快的。在小镇吃了个野生菌火锅后，开始了漫长的等待，等待着更换的大巴从大理赶来。从出现事故到新的大巴的到来，花掉了近5个小时的时间，这五个小时就算浪费了。</p>
<p>大巴前往大理，到达大理时接近5点多了，在天龙八部影视城附近吃了个晚餐，开始了赶往丽江的行程。本来计划中的大理古城和束河古镇全部泡汤，只能将行程安排到回来时在游览。</p>
<p>到达丽江时已经晚上十点的样子，刚刚下过一场雨，直接入住酒店。</p>
<hr>
<h1 id="Day-3"><a href="#Day-3" class="headerlink" title="Day 3"></a>Day 3</h1><p>相对来说最轻松的一天，今天的行程中仅有玉龙雪山景区和玉水寨。</p>
<p>在云南给我们带团的导游属于省级导游，到了丽江这种地方性景点导游需要更换为地方性导游，这也是一种地方拉动就业的措施。昨天的导游直接休息一天，今天的导游是当地的纳西族导游带领。</p>
<p>玉龙雪山是丽江旅游的必去之地，每天丽江的游客大约在2万人的样子，也就意味着每天也会有2万人会前往玉龙雪山。为了避免在景区排队，早晨6点半就出发前往玉龙雪山，一个小时左右时间到达了玉龙雪山的入口。下车后坐着环保大巴盘山而上，到达云杉坪脚下，乘索道而上到达云杉坪。云龙雪山终年云雾缭绕，尤其是在云南的雨季更是非常难以看到玉龙雪山的面貌，听导游讲他也仅仅看过10次左右的样子。我不是个幸运的人，自然也无法看到玉龙雪山的面貌，此时天还下着小雨，从云杉坪上望去仅有白茫茫的云而已。其实从索道下和索道上看到的玉龙雪山的景色几乎是完全一致的，增加索道仅是为了增加景点的可玩性。</p>
<p><img src="http://kuring.qiniudn.com/yunnan_yulong.JPG" alt="玉龙雪山" title="玉龙雪山"></p>
<p>从索道下来后，开始乘坐电瓶车往下走，经过三站，每一站都会停下来观赏风景。三站观赏都是下山的白水河，只是分为了三段，三段景色不尽相同。河水属于碱性，河水颜色是蓝色且清澈，看起来相当漂亮，所以叫做蓝月谷。</p>
<p><img src="http://kuring.qiniudn.com/yunnan_lanyuegu.JPG" alt="蓝月谷1" title="蓝月谷"></p>
<p><img src="http://kuring.qiniudn.com/yunnan_lanyuegu2.JPG" alt="蓝月谷2" title="蓝月谷"></p>
<p><img src="http://kuring.qiniudn.com/yunnan_lanyuegu3.JPG" alt="蓝月谷3" title="蓝月谷"></p>
<p>从雪山下来后，如果时间来的及可以看到张艺谋导演的《印象丽江》，500名纳西族的群众演员的表演。由于下来晚了，仅看了个5分钟的结尾，不过可以从网上找的到视频。自从有了老谋子的《印象丽江》，带团的必须跟着演出时间走，来晚了就看不上了。</p>
<p>从云龙雪山出来后，前往玉水寨。玉水寨是丽江古城河水主要源头之一，是丽江东巴文化的传承圣地。景点面积不大，但属于东巴教圣地。既然属于圣地，照片就不上了。</p>
<p>在回丽江市的途中，导游领我们去了所谓的螺旋藻配送中心，实实在在的购物环节。螺旋藻的确属于丽江特产，野生的螺旋藻需要生长在碱性环境中，而离丽江不远的程海湖是世界第三大碱性湖泊，绝对是野生螺旋藻的产地，就是不知道市面上的所谓程海湖螺旋藻有多少是真的，因为一个程海湖再大也供应不了市场上这么多的螺旋藻。螺旋藻可以被导游描述出一堆好处，什么降血压、调肠胃、增强抵抗力等。每罐螺旋藻290元，属于批发价。机灵的我在没有了解一件商品之前是不会冲动消费的，淘宝一下发现有更便宜的，好像这个品牌也不是什么最好的，自然不买，何况想买还非得从这里买不成。</p>
<p>下午一点左右到达丽江古城北门后就是我们的自由时间。首先来到了黑龙潭公园，属于市民最常去的健身场所，跟济南的五龙潭公园类似，没什么特别之处，属于市民最常去的健身场所。</p>
<p><img src="http://kuring.qiniudn.com/yunan_heilongtan.JPG" alt="黑龙潭公园" title="丽江古城旁边的黑龙潭公园"></p>
<p>从黑龙潭出来后直奔丽江古城，整个游览下来丽江古城给我的感觉就是一座已经完全商业化的现代古城，几乎跟我想象中的一致。导游跟我们说过，丽江古城内其中90%是外地人，因此要在这里找回古城的感觉是比较难了，但在这里文艺一把还是可以的。</p>
<p>丽江古城面积虽大，但是游览下来古城内也就文艺客栈、普通餐馆、艳遇酒吧、彩条围巾、特色小饰品、银首饰、手敲鼓、写真。客栈几乎被鲜花包裹，随便找一家客栈都看上去很美很艺术，看上去像是一件艺术作品。餐馆跟古城外面的没什么两样，只是位置不同罢了。酒吧在古城中占有很大一部分席地，丽江是以艳遇闻名的，艳遇最多的地方还是得在酒吧。甚至大街上都有卖艳遇服装的，可见艳遇在游客心中的地位。彩条围巾基本拿回家都是送人和当桌布的，导游说围巾基本都产自浙江的，但在逛古城的时候买个披肩披在身上看起来还是不错的。导游说银首饰是买不得的，不知真假，不买为好。从店外面看去手敲鼓店里在边劈着腿坐着敲鼓边唱歌的女士怎么看怎么觉得别扭，但那音乐很特别。古城的街道挺多，但是走着走着却厌倦了，因为每条街道上的商品也就那些。</p>
<p><img src="http://kuring.qiniudn.com/yunan_kezhan.JPG" alt="丽江古城客栈" title="丽江古城客栈"><br><img src="http://kuring.qiniudn.com/yunnan_jiuba.JPG" alt="丽江古城酒吧" title="丽江古城酒吧"><br><img src="http://kuring.qiniudn.com/yunnan_lijiang_lubiao.JPG" alt="丽江古城路标" title="丽江古城路标"><br><img src="http://kuring.qiniudn.com/yunnan_lijiang_street.JPG" alt="丽江古城街道" title="丽江古城街道"></p>
<p>边看地图边问路，再配合上不太好用的百度地图向酒店返回。丽江的特色菜为三文鱼、黑山羊和腊排骨。一路上想找一家可以吃腊排骨的店，愣是没有找到一家合适的。最后累并饿的不行了，在四方街找了家德克士填饱肚子算了。</p>
<hr>
<h1 id="Day-4"><a href="#Day-4" class="headerlink" title="Day 4"></a>Day 4</h1><p>一早起来，发觉胃部不适，不知是不是昨天在丽江古城吃了什么不合适的小吃还是晚上睡觉忘记开窗户了还是有点轻微的高原反应还是这几天的劳累还是水土不服。总之身体不舒服是旅游中的大忌，我恰巧就碰到了。稍微喝了点米粥后就上路了。约莫走了一个小时，吐了一次。还好，吐完后整个身体都轻松多了。</p>
<p>在虎跳峡附近接上我们的香格里拉导游，地方导游自然是藏族人，叫什么措，我们的团改成叫“措团”。</p>
<p>今天第一个景点为虎跳峡，虎跳峡为金沙江上的一个峡谷，下车点在峡谷上方，景点为沿着护栏峡谷底部行进，到达底部后再沿上行木栈道到达出发点。下车后听到最多的就是知了叫，知了数量非常之多，以至于木栈道上都有，伸手就可以抓到。沿木栈道而下，江水并没有想象中的急，不过在最下面的观景台上声音听起来确实很大。观景台对面有一个连接两山的石桥远远看去非常漂亮。由于照片全部损坏，不能贴图了。</p>
<p>从虎跳峡走后下午一点抵达“心中的日月–香格里拉”，香格里拉一名源于《消失的地平线》小说中虚构的地名。香格里拉的海拔在3200米，很多人在这种海拔高度会出现高原反应。</p>
<p>下午一到酒店就趴在床上累的起不来了，沉睡了两个小时后，由于晚上要去藏族家里进行家访，不敢睡的太沉。醒后又在床上躺了一个多小时，一闭眼就能睡着，感觉从来没有这么累过。咬咬牙起来后，找个超时买点东西，感觉走起来也非常的累，心想，这辈子再也不会来这地方了，纯粹的花钱找罪受。</p>
<p>吃过晚饭后，就去了藏族家。这个是额外收费的，而且费用不低。带牦牛肉和烤鸡肉的价格为一人260元，不带的为一人180元。胃部本来就不适的自然选择了180元的价格。等到我们去了之后问起其他团的，他们带牦牛和烤鸡的价格才100元，可见我们导游能黑我们多少money。这次家访纯粹是一次商业性质的家访，大巴在藏族家门口停下来，下车后就会有人给佩戴围巾，并且有专人拿着单反拍照。</p>
<p>进屋后直接到二楼，屋里已经有好多个团围着屋中央而坐。坐下后，品尝酥油茶，青稞酒，还有酸奶干，甚至还有青稞拿来当瓜子吃的。</p>
<p>等牦牛肉和烤鸡都上齐后，节目就开始了。主持人很明显经过些专业的训练，嗓门特别大，也特别擅长带动气氛。藏族人好客的方式就是跺地板加鼓掌，声音越大越好。地板为木制的，一群人跺起脚来后声音特别大。节目大约持续了三个小时，无非就是跳舞、唱歌、跺脚、教些藏族的语言等。其实节目挺无聊，但是热闹。挺佩服主持人能够将这么庸俗的一个节目坚持了三个小时之巨。本来身体非常难受的我，在欢呼中也变得热情高涨，使劲跺脚，使劲故障，全身心投入到节目中，最后居然难受的症状全部消失了。</p>
<p>期间，藏民开始按照在门口时拍摄的照片找人，所有人的照片早已经洗好，并且用硬塑料膜保护着。照片20元一位，可见这是多么商业的一次活动。</p>
<p>到了酒店已经11点了，导游嘱咐过不能早睡，不能洗澡，否则很容易出现高原头痛等高原反应的症状。</p>
<hr>
<h1 id="Day-5"><a href="#Day-5" class="headerlink" title="Day 5"></a>Day 5</h1><p>照旧是早起，今天的行程为普达措国家森林公园。为了防止出现高原反应带来的事故，同时也可以达到赚钱的目的，导游推荐我们在香格里拉买氧气灌和红景天口服液。仙剑奇侠传三中的景天大概就取自此药名吧。普达措的最高处海拔可以达到4200米，想想这个海拔高度，为了避免高原反应，再加上昨天我本来就很不舒服，为了保险了我买了两罐，并且购买了一盒红景天口服液。后来才发现这些花费都是多余的，普达措之所以称之为森林公园，森林肯定非常之多，空气中氧气含量不会很低。走在普达措中，感觉空气比氧气瓶中的更纯净。</p>
<p>整个森林公园分为了三部分：属都湖、弥里塘和碧塔海。整个森林公园的面积非常之大，三个景点之间大约需要坐10-20分钟的电瓶车，电瓶车上都会有导游对景点进行讲解。</p>
<p>普达措应该是我这次云南旅游中最值得一去的地方，整个游览下来就感觉这个地方好似人间仙境。这里的湖面非常静，远处牦牛和马儿低着头在不停的吃草，一副悠闲自得的样子。遍地的小野花，在牛粪堆中自由的生长。从山上留下来的水就在平地上冲出一条弯弯曲曲的河，令我一直在想河道为什么是S型，这说明山上留下来的水总是缓缓的。水杉树上挂满了蜘蛛网版的白色的毛，更添加了这里的仙境色彩，据说是寄生在水杉上的一种植物。山间偶尔会见到特别小的小松鼠在树下找点吃的，然后一会就不见了，仿佛刚才见到的不是真的。这中景色中有身临其境方能体会。</p>
<p>属都湖为一个天然湖泊，远处就能看到牦牛和马儿。弥里塘是整个森林的海拔最高处，地方非常平静，视野相当开阔，牦牛和马儿在远处的草地上吃着小花小草。碧塔海是整个景区的核心景点，我们选择徒步4公里的路程，沿着碧塔海从湖的一边走到另外一边。在漫步中慢慢体会碧塔海的迷人之处。</p>
<p><img src="http://kuring.qiniudn.com/yunan_pudacuo_xiaohe.JPG" alt="山间的小河" title="山间的小河"><br><img src="http://kuring.qiniudn.com/yunan_pudacuo_militang.JPG" alt="弥里塘" title="弥里塘"><br><img src="http://kuring.qiniudn.com/yunan_pudacuo_bitahai.JPG" alt="碧塔海" title="碧塔海"><br><img src="http://kuring.qiniudn.com/yunnan_pudacuo_hua.JPG" alt="野花" title="野花"><br><img src="http://kuring.qiniudn.com/yunnan_pudacuo_river.JPG" alt="河" title="富有诗意的小河"></p>
<p>从普达措出来后，藏族导游跟我们说拜拜。在香格里拉吃过午饭后，开始马不停蹄的往丽江赶。期间路过“长江第一湾”景点，在观景楼上高高看去，除了恐高之外没有别的感觉。前文已经介绍过“长江第一湾”景点的一些坑况，不再对坑进行过多描述。</p>
<p>下午三点多到达丽江的酒店，在酒店放下东西后直接前往大理古城，这里酒店离的大理古城的南门算是比较近。上次来没有吃上当地特色小吃腊排骨，在南门外找了家店品尝一番，吃起来跟我想象中的一致，除了有点排骨味之外还略带腊味。</p>
<p>吃完腊排骨后已经是晚上8点左右的时间，上次逛丽江古城主要是逛了北门附近多些，这次逛上次没有逛过的南门附近。南门附近与北门不同的是，古城南边有很多的客栈，但是这里的胡同和客栈却略显凄凉，人少了需要，客栈也没有那么文艺。转了几个胡同后，在转了一个又一个弯后的胡同中找到了大名鼎鼎的木府。时间已晚，看着地图加导航接回酒店睡下了。</p>
<hr>
<h1 id="Day-6"><a href="#Day-6" class="headerlink" title="Day 6"></a>Day 6</h1><p>今天的行程为从丽江-大理-昆明。上次去大理仅是路过，这次是去体验，虽然时间也仅仅有一天。</p>
<p>下关风，上关花，苍山雪，洱海月。风花雪月便是大理景色的最真实写照，大理城就被下关、上关、苍山和洱海包裹着。本次大理执行风花雪月均为体会到，甚至连洱海边都未到过，仅仅是去了洱源小西湖，也勉强算是到过洱海吧。</p>
<p>快到洱源小西湖的路上遇到了集市，集市上有用竹篓子卖小猪，看起来挺滑稽挺有意思。</p>
<p>进入洱源小西湖后导游会先带领到购物区，都是些当地的特产，价格也不贵。刚坐上木船会看到鱼鹰表演，木船绕着西湖转上一圈，欣赏西湖的美景。</p>
<p>下船后，会去餐馆白族的歌舞表演，并品尝白族三道茶。三道茶“头苦、二甜、三回味”，喝起来味道怪怪的。从歌舞表演厅出来后就直接出西湖了。</p>
<p><img src="http://kuring.qiniudn.com/yunan_xihu.JPG" alt="洱源小西湖" title="洱源小西湖门口"><br><img src="http://kuring.qiniudn.com/yunan_xihu_yuying.JPG" alt="鱼鹰表演" title="鱼鹰表演"><br><img src="http://kuring.qiniudn.com/yunan_xihu2.JPG" alt="洱源小西湖" title="洱源小西湖"><br><img src="http://kuring.qiniudn.com/yunan_sandaocha.JPG" alt="三道茶" title="白族三道茶"></p>
<p>从西湖出来后，直接赶到白银购物中心十八里铺。大理是白银产地，在大理旅游购物自然少不了白银。一下车，在十八里铺的停车场已经停了几十辆大巴，显然都是拉来购物的。导游象征性的给我们介绍了下大理白族的房屋布置和婚房布置，顺便看了下几个人在手工制作白银，最后就带我们到白银购物大厅里了，然后导游就撤了。留下来选择购买白银的时间非常的长，有一个半小时之久。</p>
<p>艰难的等待后，在十八里铺吃完午饭后，直接奔向大理古城。由于南门无法停车，大巴在离大理古城南门2里地的停车场停下，导游给我们游玩的时间是1个半小时，偌大一个大理古城仅有一个半小时的游玩时间，而一个十八里铺的购物大厅却也预留了差不多时间。</p>
<p>大理古城相比丽江古城更现代化，古城内有相当多的现代商店，甚至都有超市的存在，除了建筑风格比较古之外，其他都是新的。古城的北面，直接就成了居民区了。不过相比丽江古城，我更喜欢大理古城，因为这里购物更方便，而且街道也建设的更加规整，不会出现迷路的情况。里面的物品价格也更加便宜，整个古城更像是城市中的步行街。</p>
<p><img src="http://kuring.qiniudn.com/yunan_daligucheng.JPG" alt="古城南门" title="大理古城南门"><br><img src="http://kuring.qiniudn.com/yunan_dali_wuhualou.JPG" alt="五华楼" title="大理古城的五华楼"><br><img src="http://kuring.qiniudn.com/yunan_dali_yangrenjie.JPG" alt="洋人街" title="大理古城的洋人街"></p>
<p>从大理古城走后，直接赶回昆明，到达昆明酒店已经是晚上10点了。</p>
<hr>
<h1 id="Day-7"><a href="#Day-7" class="headerlink" title="Day 7"></a>Day 7</h1><p>早餐后赶往中国名牌企业七彩云南，顾名思义就是购物了。导游一而再再而三的强调，导游前五天是天使，第六天就是魔鬼。“什么都可以落在宾馆，唯独你们的武器–钱包不能落在宾馆”。没有比这个更直白的了。</p>
<p>七彩云南园区内共有七个展馆，首先带领我们去的是翡翠馆。翡翠主要产自缅甸和云南接壤地带，自然会成为云南的特产代表。导游带领我们体验一把模拟的翡翠形成过程的动画，紧接着就会带领我们到达翡翠销售大厅。购买翡翠的时间预留的非常充足，期间为了打发时间跑去了孔雀园转了一圈。整个行程中导游是只字未提孔雀园，但是孔雀园却是七彩云南园区中最适合游玩的地方。孔雀园内有几千只孔雀，植物的种类也非常多，还有一面非常大的花墙，看上去也是相当漂亮。</p>
<p>集合后又餐馆了普洱茶馆，直接被关到屋里面品茶，品完熟茶品生茶，品完茶后自然是买茶。</p>
<p><img src="http://kuring.qiniudn.com/yunan_qicai.JPG" alt="七彩云南" title="七彩云南"><br><img src="http://kuring.qiniudn.com/yunan_qicai_map.JPG" alt="七彩云南地图" title="七彩云南地图"><br><img src="http://kuring.qiniudn.com/yunan_qicai_hua.JPG" alt="孔雀园花墙" title="孔雀园的花墙"></p>
<p>在七彩云南吃过午餐后，大巴赶往天造奇观的石林。去石林的路上，从未看到过石林内形状的石头，可是到了石林内部却到处都是竖状的石头，一直对竖状石头的成因感到颇为好奇。一个5A级的景区仅仅预留了一个半小时的时间游览，而且还包含了排队等电瓶车的时间。</p>
<p>石林分大石林和小石林，大石林的石头看上去更高大一些，小石林的石头看上去稍微矮小一些。听景区的导游介绍，到了大石林找到“石林”二子后拍个照后就相当于花掉了100块钱的门票，到了小石林后找到“阿诗玛的化身”后就相当于又花掉了70元的门票。</p>
<p>到达大石林后找到了“石林”二字拍完照后，没有听导游的话直接原路返回坐电瓶车到小石林，而是出于好奇在石林内部转起迷宫来，石林面积应该不小，至少我在内部至少走了40分钟后也没有走多少，而且重要的是我彻底迷路了，找不到入口也找不到出口。一看时间已经过去了一大半，还没到小石林，就抓紧时间往外赶，转了半天迷宫终于出来了。</p>
<p>排队挤上电瓶车到达小石林，小石林石头之间的间隙要大很多，石头之间还有草地，走在里面不会存在迷路的可能。拐个弯找到阿诗玛的化身拍个照抓紧时间往出口赶。阿诗玛的化身石我怎么看也没看出像一个人来，石头背后的故事就不深究了。</p>
<p><img src="http://kuring.qiniudn.com/yunnan_shilin1.JPG" alt="大石林" title="值100块钱的石林二字"><br><img src="http://kuring.qiniudn.com/yunan_shilin2.JPG" alt="剑锋池" title="大石林的剑锋池"><br><img src="http://kuring.qiniudn.com/yunan_xiaoshilin.JPG" alt="小石林" title="小石林"><br><img src="http://kuring.qiniudn.com/yunan_xiaoshilin2.JPG" alt="小石林" title="小石林"><br><img src="http://kuring.qiniudn.com/yunan_xiaoshilin3.JPG" alt="小石林" title="小石林"><br><img src="http://kuring.qiniudn.com/yunan_ashima.JPG" alt="阿诗玛化身" title="阿诗玛化身"></p>
<p>从石林归来后，又回到了七彩云南。这次购物的重点已经不再是翡翠，而是黄龙玉。黄龙玉产自云南，发现较晚，因此价格较便宜。我直接走向黄龙玉旁边的土特产超市，从里面买点鲜花饼、当地咖啡、普洱茶等，价格还算亲民，拿回来送朋友是个很不错的选择。</p>
<p>在七彩云南吃过地道的过桥米线后直接入住温泉酒店，跟陪伴我们六天的导游和司机师傅说再见后，在温泉酒店做了个鱼疗后，收拾所有的物品打包准备回温馨的家。</p>
<hr>
<h1 id="Day-8"><a href="#Day-8" class="headerlink" title="Day 8"></a>Day 8</h1><p>8点20的飞机，五点半开始往机场赶。12点左右已经回到了温馨的家。</p>
<hr>
<h1 id="杂"><a href="#杂" class="headerlink" title="杂"></a>杂</h1><h2 id="方向感"><a href="#方向感" class="headerlink" title="方向感"></a>方向感</h2><p>我无论到哪里都喜欢找找方向感，看看那是南，我是属于那种第一次到一个地方后只要认错了方向就再也调不过来的那种人。这一周的时间我却几乎没有掉过方向来，以至于到后来干脆就不考虑方向了，管他东西南北，只要能回得了酒店，只要能找到大巴就OK了。</p>
<h2 id="民族"><a href="#民族" class="headerlink" title="民族"></a>民族</h2><p>本次行程中的几个城市分属于不同的少数民族，风俗习惯、文化传统和建筑风格各有特点。昆明和楚雄是彝族人居多，大理是白族自治州，丽江是纳西族的聚居地，香格里拉主要是藏族人。最有意思的是，这几个少数名族对男女的称呼各有特色。彝族人对男性称呼为“阿黑哥”，对女性称呼为“阿诗玛”；白族分别称呼为“金花”和“阿鹏”；纳西族分别称呼为“胖金妹”和“胖金哥”；藏族分别称呼为“扎西”和“卓玛”。</p>
<hr>
<h1 id="尾"><a href="#尾" class="headerlink" title="尾"></a>尾</h1><p>本来是计划写成散文的，文笔有限，写着写着就写成记叙文了。要是有足够的文采，绝对可以写出比《从百草园到三味书屋》中需要背诵的片段更优美的文字，可惜不是作家的料，仅能码字而已。</p>
<p>旅游不易，码字更难，且行且珍惜。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Kuring Lyu" />
          <p class="site-author-name" itemprop="name">Kuring Lyu</p>
           
              <p class="site-description motion-element" itemprop="description">一只特立独行的鸟</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">106</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kuring" title="Github地址" target="_blank">Github地址</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://weibo.com/ilvkai" title="新浪微博" target="_blank">新浪微博</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kuring Lyu</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
